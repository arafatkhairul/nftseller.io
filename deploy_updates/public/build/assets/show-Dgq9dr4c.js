import{r as o,a as Q,j as e,H as R,b as v}from"./app-BJvc5En1.js";import{B as q}from"./badge-UqWFWnzv.js";import{B as t}from"./button-DxzuIuhW.js";import{C as d,a as c,b as m,c as p}from"./card-B85IapDX.js";import{D as h,a as u,b as x,c as j,d as f,e as g}from"./dialog-CVwK1KpY.js";import{L as r}from"./label-Dp5QKhMh.js";import{T as F}from"./textarea-CYgVMv6m.js";import{A as P}from"./app-layout-CXzkv7Da.js";import{n as B,o as H,j as I}from"./Combination-CBsxsoGX.js";/* empty css            */import"./index-CoSAqTOx.js";import"./createLucideIcon-BZtpXEuX.js";import"./index-CSymTNq3.js";import"./index-BuJWQyH3.js";import"./app-shell-B8nd7GtJ.js";import"./dropdown-menu-hRa-5S7K.js";import"./index-lucvfSli.js";import"./iconBase-B6rmVwEN.js";function ae({appeal:s}){const[N,a]=o.useState(!1),[b,n]=o.useState(!1),[A,i]=o.useState(!1),{data:C,setData:w,post:k,processing:y,reset:_}=Q({question:""}),T=()=>{v.post(route("admin.p2p-appeals.resolve",s.id),{action:"approve"},{onSuccess:()=>n(!1)})},D=()=>{v.post(route("admin.p2p-appeals.resolve",s.id),{action:"reject"},{onSuccess:()=>a(!1)})},O=l=>{l.preventDefault(),k(route("admin.p2p-appeals.ask-question",s.id),{onSuccess:()=>{i(!1),_()}})},S=s.status==="appeal_approved"||s.status==="appeal_rejected"||s.status==="cancelled";return e.jsxs(P,{breadcrumbs:[{title:"Admin",href:"/admin/dashboard"},{title:"P2P Appeals",href:"/admin/p2p-appeals"},{title:`Order #${s.order_number}`,href:`/admin/p2p-appeals/${s.id}`}],children:[e.jsx(R,{title:`Appeal - Order #${s.order_number}`}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Appeal Details"}),e.jsx(q,{variant:s.status==="appealed"?"outline":s.status==="appeal_approved"?"default":s.status==="appeal_rejected"?"destructive":"secondary",className:"text-sm capitalize",children:s.status.replace("_"," ")})]}),e.jsxs("p",{className:"text-muted-foreground mt-1",children:["Reviewing appeal for Order #",s.order_number]})]}),!S&&e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(t,{variant:"outline",onClick:()=>i(!0),children:[e.jsx(B,{className:"mr-2 h-4 w-4"}),"Ask Question"]}),e.jsxs(t,{variant:"destructive",onClick:()=>a(!0),children:[e.jsx(H,{className:"mr-2 h-4 w-4"}),"Reject Appeal"]}),e.jsxs(t,{variant:"default",className:"bg-green-600 hover:bg-green-700",onClick:()=>n(!0),children:[e.jsx(I,{className:"mr-2 h-4 w-4"}),"Approve Appeal"]})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(d,{className:"md:col-span-2",children:[e.jsx(c,{children:e.jsx(m,{children:"Appeal Information"})}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsx(r,{className:"text-xs text-muted-foreground uppercase",children:"Reason for Appeal"}),e.jsx("p",{className:"mt-1 text-lg",children:s.appeal_reason})]}),e.jsxs("div",{className:"flex gap-4 text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Submitted by: ",e.jsx("span",{className:"font-medium text-foreground",children:s.user_name})," (",s.user_email,")"]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:["Submitted at: ",s.appealed_at]})]})]})]}),e.jsxs(d,{children:[e.jsx(c,{children:e.jsx(m,{children:"Transaction Details"})}),e.jsx(p,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{className:"text-xs text-muted-foreground",children:"Amount"}),e.jsxs("p",{className:"font-medium",children:[s.amount," ",s.network]})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-xs text-muted-foreground",children:"Payment Method"}),e.jsx("p",{className:"font-medium",children:s.payment_method})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(r,{className:"text-xs text-muted-foreground",children:"Partner Address"}),e.jsx("p",{className:"font-mono text-sm break-all bg-muted p-2 rounded mt-1",children:s.partner_address})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(r,{className:"text-xs text-muted-foreground",children:"Sender Address (User)"}),e.jsx("p",{className:"font-mono text-sm break-all bg-muted p-2 rounded mt-1",children:s.sender_address||"Not provided"})]})]})})]}),e.jsxs(d,{children:[e.jsx(c,{children:e.jsx(m,{children:"NFT Details"})}),e.jsx(p,{children:e.jsxs("div",{className:"flex items-start gap-4",children:[s.nft_image&&e.jsx("img",{src:s.nft_image,alt:s.nft_name,className:"w-24 h-24 rounded-lg object-cover border"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold",children:s.nft_name}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"This NFT is currently locked in escrow pending this appeal resolution."})]})]})})]})]})]}),e.jsx(h,{open:b,onOpenChange:n,children:e.jsxs(u,{children:[e.jsxs(x,{children:[e.jsx(j,{children:"Approve Appeal"}),e.jsx(f,{children:"Are you sure you want to approve this appeal? This will cancel the current P2P transfer and allow the user to retry the transaction or place a new order. The NFT will remain with the seller until a new order is placed."})]}),e.jsxs(g,{children:[e.jsx(t,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsx(t,{className:"bg-green-600 hover:bg-green-700",onClick:T,children:"Confirm Approve"})]})]})}),e.jsx(h,{open:N,onOpenChange:a,children:e.jsxs(u,{children:[e.jsxs(x,{children:[e.jsx(j,{children:"Reject Appeal"}),e.jsx(f,{children:"Are you sure you want to reject this appeal? This will mark the transfer as failed/rejected. The user will be notified that their appeal was unsuccessful."})]}),e.jsxs(g,{children:[e.jsx(t,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),e.jsx(t,{variant:"destructive",onClick:D,children:"Confirm Reject"})]})]})}),e.jsx(h,{open:A,onOpenChange:i,children:e.jsxs(u,{children:[e.jsxs(x,{children:[e.jsx(j,{children:"Ask Question"}),e.jsx(f,{children:"This will create a new support ticket linked to this appeal. The user will be notified and can reply via the support center."})]}),e.jsxs("form",{onSubmit:O,children:[e.jsxs("div",{className:"py-4",children:[e.jsx(r,{htmlFor:"question",children:"Your Question"}),e.jsx(F,{id:"question",value:C.question,onChange:l=>w("question",l.target.value),placeholder:"e.g., Please provide proof of payment...",className:"mt-2",required:!0})]}),e.jsxs(g,{children:[e.jsx(t,{type:"button",variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e.jsx(t,{type:"submit",disabled:y,children:"Send Question"})]})]})]})})]})}export{ae as default};
