import{r as o,j as e,H as S,b as p}from"./app-DSGaxAGe.js";import{B as j}from"./button-Bdfb3AFu.js";import{C as _,a as F,b as E,d as k,c as B}from"./card-DdM0Y4VF.js";import{D as L,a as P,b as T,c as I}from"./dialog-AGN1ugF6.js";import{I as f}from"./input-CaMqGsMd.js";import{L as N}from"./label-Cxu8gXUo.js";import{A as R}from"./app-layout-DV7UlC9e.js";import{F as U,c as H,d as M}from"./Combination-D3l0WcIo.js";/* empty css            */import"./index-i0Ap6W8S.js";import"./createLucideIcon-C21r9A7G.js";import"./index-Bseb7LQm.js";import"./index-xp19FS7k.js";import"./app-shell-yWMoWwrq.js";import"./dropdown-menu-qRASxi-l.js";import"./index-lucvfSli.js";import"./iconBase-81adTpND.js";const $=[{title:"Admin",href:"/admin/dashboard"},{title:"Blockchains",href:"/admin/blockchains"}];function le({blockchains:x}){const[y,n]=o.useState(!1),[i,b]=o.useState(null),[h,g]=o.useState(!1),[a,d]=o.useState({}),[v,u]=o.useState(null),[t,c]=o.useState({name:"",logo:null,exchange_rate:"0"}),w=s=>{const r=s.target.files?.[0];if(r){c({...t,logo:r});const l=new FileReader;l.onloadend=()=>{u(l.result)},l.readAsDataURL(r)}},C=s=>{s.preventDefault(),g(!0),d({});const r=new FormData;r.append("name",t.name),r.append("exchange_rate",t.exchange_rate),t.logo&&r.append("logo",t.logo),i?p.post(`/admin/blockchains/${i}`,r,{onSuccess:()=>{n(!1),m()},onError:l=>{d(l)},onFinish:()=>{g(!1)}}):p.post("/admin/blockchains",r,{onSuccess:()=>{n(!1),m()},onError:l=>{d(l)},onFinish:()=>{g(!1)}})},m=()=>{c({name:"",logo:null,exchange_rate:"0"}),u(null),b(null),d({})},A=s=>{c({name:s.name,logo:null,exchange_rate:String(s.exchange_rate)}),u(s.logo),b(s.id),n(!0)},D=s=>{confirm("Are you sure you want to delete this blockchain?")&&p.delete(`/admin/blockchains/${s}`)};return e.jsxs(R,{breadcrumbs:$,children:[e.jsx(S,{title:"Blockchain Management"}),e.jsxs("div",{className:"dash-view",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold tracking-tight",children:"Blockchain Management"}),e.jsx("p",{className:"mt-2 text-lg text-muted-foreground",children:"Manage blockchain networks for your NFT marketplace"})]}),e.jsxs(j,{onClick:()=>{m(),n(!0)},className:"flex items-center gap-2",children:[e.jsx(U,{className:"w-4 h-4"}),"Add Blockchain"]})]}),e.jsxs(_,{children:[e.jsxs(F,{children:[e.jsx(E,{children:"All Blockchains"}),e.jsxs(k,{children:["Total of ",x.length," blockchains"]})]}),e.jsx(B,{children:x.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:"No blockchains yet. Add your first blockchain!"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"border-b",children:e.jsxs("tr",{className:"text-left text-sm font-medium text-muted-foreground",children:[e.jsx("th",{className:"pb-3 px-2",children:"Logo"}),e.jsx("th",{className:"pb-3 px-2",children:"Name"}),e.jsx("th",{className:"pb-3 px-2",children:"Exchange Rate (USD)"}),e.jsx("th",{className:"pb-3 px-2",children:"NFTs Count"}),e.jsx("th",{className:"pb-3 px-2",children:"Actions"})]})}),e.jsx("tbody",{children:x.map(s=>e.jsxs("tr",{className:"border-b hover:bg-muted/50 transition-colors",children:[e.jsx("td",{className:"py-4 px-2",children:s.logo?e.jsx("img",{src:s.logo,alt:s.name,className:"w-10 h-10 rounded-lg object-contain bg-muted p-1"}):e.jsx("div",{className:"w-10 h-10 rounded-lg bg-muted flex items-center justify-center text-xs font-bold",children:s.name.charAt(0)})}),e.jsx("td",{className:"py-4 px-2 font-medium",children:s.name}),e.jsxs("td",{className:"py-4 px-2",children:["$",Number(s.exchange_rate).toLocaleString()]}),e.jsx("td",{className:"py-4 px-2 text-muted-foreground",children:s.nfts_count}),e.jsx("td",{className:"py-4 px-2",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>A(s),className:"p-2 text-blue-500 hover:bg-blue-500/10 rounded-lg transition-colors",title:"Edit",children:e.jsx(H,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>D(s.id),className:"p-2 text-red-500 hover:bg-red-500/10 rounded-lg transition-colors",title:"Delete",children:e.jsx(M,{className:"w-4 h-4"})})]})})]},s.id))})]})})})]})]}),e.jsx(L,{open:y,onOpenChange:n,children:e.jsxs(P,{children:[e.jsx(T,{children:e.jsx(I,{children:i?"Edit Blockchain":"Add New Blockchain"})}),e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(N,{htmlFor:"name",children:"Blockchain Name"}),e.jsx(f,{id:"name",value:t.name,onChange:s=>c({...t,name:s.target.value}),placeholder:"e.g., Ethereum, Polygon, Solana",className:"mt-1",required:!0}),a.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:Array.isArray(a.name)?a.name[0]:a.name})]}),e.jsxs("div",{children:[e.jsx(N,{htmlFor:"exchange_rate",children:"Exchange Rate (1 Unit to USD)"}),e.jsx(f,{id:"exchange_rate",type:"number",step:"0.01",value:t.exchange_rate,onChange:s=>c({...t,exchange_rate:s.target.value}),placeholder:"e.g., 2000.00",className:"mt-1",required:!0}),a.exchange_rate&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:Array.isArray(a.exchange_rate)?a.exchange_rate[0]:a.exchange_rate})]}),e.jsxs("div",{children:[e.jsx(N,{htmlFor:"logo",children:"Logo"}),v&&e.jsxs("div",{className:"mt-2 mb-3",children:[e.jsx("img",{src:v,alt:"Preview",className:"w-20 h-20 rounded-lg object-contain bg-muted p-2 border"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:i&&!t.logo?"Current logo":"New logo preview"})]}),e.jsx(f,{id:"logo",type:"file",accept:"image/*",onChange:w,className:"mt-1"}),a.logo&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:Array.isArray(a.logo)?a.logo[0]:a.logo})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(j,{type:"submit",disabled:h,className:"flex-1",children:h?"Saving...":i?"Update":"Create"}),e.jsx(j,{type:"button",variant:"outline",onClick:()=>{n(!1),m()},disabled:h,className:"flex-1",children:"Cancel"})]})]})]})})]})}export{le as default};
