import{a as h,r as o,j as e,H as j}from"./app-BuO7t050.js";import{B as a}from"./badge-CX1FzLWM.js";import{B as g}from"./button-CLoTHJno.js";import{C as n,a as b,c as v}from"./card-CHa--B7O.js";import{T as N}from"./textarea-Cr4UJTg7.js";import{A as y}from"./app-layout-SZNpsY9w.js";import{E as m,a as _,G as w}from"./Combination-BCtMqTur.js";/* empty css            */import"./app-shell-yKHYaNoQ.js";import"./index-D1iA0pQZ.js";import"./createLucideIcon-ByzxiWwV.js";import"./index-39uZGfW-.js";import"./index-e0lLMl4R.js";import"./dropdown-menu-B7mCmnL2.js";import"./index-lucvfSli.js";import"./iconBase-BJXu5dwp.js";function U({ticket:r,messages:t}){const{data:l,setData:c,post:x,processing:p,reset:u}=h({message:""}),i=o.useRef(null),f=()=>{i.current?.scrollIntoView({behavior:"smooth"})};o.useEffect(()=>{f()},[t]);const d=s=>{s.preventDefault(),x(`/support-tickets/${r.id}/reply`,{onSuccess:()=>u()})};return e.jsxs(y,{breadcrumbs:[{title:"Support Tickets",href:"/support-tickets"},{title:r.ticket_unique_id,href:`/support-tickets/${r.id}`}],children:[e.jsx(j,{title:`Ticket ${r.ticket_unique_id}`}),e.jsxs("div",{className:"p-4 md:p-6 h-[calc(100vh-4rem)] flex flex-col gap-4 md:gap-6",children:[e.jsx(n,{className:"flex-shrink-0",children:e.jsx(b,{className:"py-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-lg md:text-xl font-bold",children:r.subject}),e.jsx(a,{variant:"outline",className:"text-xs",children:r.ticket_unique_id})]}),e.jsxs("p",{className:"text-xs md:text-sm text-muted-foreground mt-1",children:["Created on ",r.created_at]})]}),e.jsxs("div",{className:"flex items-center gap-2 self-start md:self-auto",children:[e.jsx(a,{variant:r.priority==="high"?"destructive":"secondary",children:r.priority}),e.jsx(a,{className:r.status==="open"?"bg-green-500":r.status==="in_progress"?"bg-blue-500":"bg-gray-500",children:r.status.replace("_"," ")})]})]})})}),e.jsxs(n,{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsxs(v,{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[t.map(s=>e.jsxs("div",{className:`flex gap-3 ${s.is_me?"flex-row-reverse":"flex-row"}`,children:[e.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${s.is_admin?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600"}`,children:s.user_avatar?e.jsx("img",{src:s.user_avatar,alt:s.user_name,className:"w-full h-full rounded-full object-cover"}):s.is_admin?e.jsx(m,{}):e.jsx(_,{})}),e.jsxs("div",{className:`flex flex-col max-w-[85%] md:max-w-[70%] ${s.is_me?"items-end":"items-start"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-xs font-semibold",children:s.user_name}),e.jsx("span",{className:"text-[10px] text-muted-foreground",children:s.created_at})]}),e.jsx("div",{className:`p-3 rounded-lg text-sm ${s.is_me?"bg-primary text-primary-foreground rounded-tr-none":"bg-muted rounded-tl-none"}`,children:s.message})]})]},s.id)),e.jsx("div",{ref:i})]}),e.jsx("div",{className:"p-4 border-t bg-background",children:r.status==="closed"?e.jsx("div",{className:"flex items-center justify-center p-4 bg-muted/50 rounded-lg border border-dashed",children:e.jsxs("div",{className:"text-center",children:[e.jsx(m,{className:"w-6 h-6 mx-auto text-muted-foreground mb-2"}),e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"This ticket is closed. You cannot reply."})]})}):e.jsxs("form",{onSubmit:d,className:"flex gap-3 md:gap-4",children:[e.jsx(N,{value:l.message,onChange:s=>c("message",s.target.value),placeholder:"Type your reply...",className:"min-h-[50px] md:min-h-[60px] resize-none",onKeyDown:s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),d(s))}}),e.jsx(g,{type:"submit",size:"icon",className:"h-[50px] w-[50px] md:h-[60px] md:w-[60px] flex-shrink-0",disabled:p||!l.message.trim(),children:e.jsx(w,{className:"w-4 h-4 md:w-5 md:h-5"})})]})})]})]})]})}export{U as default};
