import{r as h,j as e,H as z,b as N}from"./app-BuO7t050.js";import{B as D}from"./badge-CX1FzLWM.js";import{B as n}from"./button-CLoTHJno.js";import{C as d,a as r,b as i,c,d as P}from"./card-CHa--B7O.js";import{P as E}from"./pagination-CSMtXWH3.js";import{A as T}from"./app-layout-SZNpsY9w.js";import{l as I,a as H}from"./Combination-BCtMqTur.js";import{F as b,a as v,b as B,c as M}from"./index-B0WUNDkB.js";/* empty css            */import"./app-shell-yKHYaNoQ.js";import"./index-D1iA0pQZ.js";import"./createLucideIcon-ByzxiWwV.js";import"./index-39uZGfW-.js";import"./index-e0lLMl4R.js";import"./dropdown-menu-B7mCmnL2.js";import"./index-lucvfSli.js";import"./iconBase-BJXu5dwp.js";const $=[{title:"Admin",href:"/admin/dashboard"},{title:"Orders",href:"/admin/orders"}],y={pending:{color:"bg-yellow-500/10 text-yellow-700 border-yellow-200",icon:B,label:"Pending"},completed:{color:"bg-green-500/10 text-green-700 border-green-200",icon:b,label:"Completed"},cancelled:{color:"bg-red-500/10 text-red-700 border-red-200",icon:v,label:"Cancelled"},failed:{color:"bg-red-500/10 text-red-700 border-red-200",icon:v,label:"Failed"},sent:{color:"bg-blue-500/10 text-blue-700 border-blue-200",icon:b,label:"Sent"}};function le({orders:o,filters:C,totalRevenue:w,stats:t}){const[u,S]=h.useState(C?.search||""),[_,j]=h.useState(null),[l,m]=h.useState("all"),f=l==="all"?o.data:o.data.filter(s=>s.status===l),k=(s,a)=>{N.patch(`/admin/orders/${s}/status`,{status:a},{onSuccess:()=>{j(null)}})},F=s=>["pending","completed","cancelled","failed"].filter(a=>a!==s),O=s=>{s.preventDefault(),N.get("/admin/orders",{search:u},{preserveState:!0})};return e.jsxs(T,{breadcrumbs:$,children:[e.jsx(z,{title:"Order Management"}),e.jsxs("div",{className:"dash-view",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold tracking-tight",children:"Order Management"}),e.jsx("p",{className:"mt-2 text-lg text-muted-foreground",children:"Manage and track all orders in the system."})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4 sm:grid-cols-2",children:[e.jsxs(d,{children:[e.jsx(r,{className:"pb-3",children:e.jsx(i,{className:"text-sm font-medium",children:"Total Orders"})}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.total}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All time"})]})]}),e.jsxs(d,{children:[e.jsx(r,{className:"pb-3",children:e.jsx(i,{className:"text-sm font-medium",children:"Pending"})}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-500",children:t.pending}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting action"})]})]}),e.jsxs(d,{children:[e.jsx(r,{className:"pb-3",children:e.jsx(i,{className:"text-sm font-medium",children:"Completed"})}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-500",children:t.completed}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Fulfilled"})]})]}),e.jsxs(d,{children:[e.jsx(r,{className:"pb-3",children:e.jsx(i,{className:"text-sm font-medium",children:"Total Revenue"})}),e.jsxs(c,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[Number(w??0).toFixed(2)," ETH"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All time"})]})]})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs(n,{variant:l==="all"?"default":"outline",onClick:()=>m("all"),size:"sm",children:["All (",t.total,")"]}),e.jsxs(n,{variant:l==="pending"?"default":"outline",onClick:()=>m("pending"),size:"sm",children:["Pending (",t.pending,")"]}),e.jsxs(n,{variant:l==="completed"?"default":"outline",onClick:()=>m("completed"),size:"sm",children:["Completed (",t.completed,")"]}),e.jsxs(n,{variant:l==="failed"?"default":"outline",onClick:()=>m("failed"),size:"sm",children:["Failed (",t.failed,")"]})]}),e.jsx("div",{className:"flex justify-end mb-4",children:e.jsxs("form",{onSubmit:O,className:"flex gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(I,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search Order ID, Name, Email...",value:u,onChange:s=>S(s.target.value),className:"pl-9 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary w-72 bg-background"})]}),e.jsx(n,{type:"submit",children:"Search"})]})}),e.jsxs(d,{children:[e.jsxs(r,{children:[e.jsx(i,{children:"All Orders"}),e.jsx(P,{children:"Manage customer orders and payment status"})]}),e.jsx(c,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"border-b",children:e.jsxs("tr",{className:"text-left text-sm font-medium text-muted-foreground",children:[e.jsx("th",{className:"pb-3 px-2",children:"Order ID"}),e.jsx("th",{className:"pb-3 px-2",children:"Customer"}),e.jsx("th",{className:"pb-3 px-2",children:"NFT"}),e.jsx("th",{className:"pb-3 px-2",children:"Amount"}),e.jsx("th",{className:"pb-3 px-2",children:"Payment"}),e.jsx("th",{className:"pb-3 px-2",children:"Sent Details"}),e.jsx("th",{className:"pb-3 px-2",children:"Status"}),e.jsx("th",{className:"pb-3 px-2",children:"Date"}),e.jsx("th",{className:"pb-3 px-2",children:"Action"})]})}),e.jsx("tbody",{children:f.length>0?f.map(s=>{const a=y[s.status]||y.pending,A=a.icon,x=_===s.id;let g=a.label;return s.status==="sent"&&s.payment_method==="p2p"&&(g="Sent (P2P)"),e.jsxs("tr",{className:"border-b hover:bg-muted/50 transition-colors",children:[e.jsx("td",{className:"py-4 px-2",children:e.jsx("span",{className:"font-mono text-sm font-medium",children:s.order_number})}),e.jsx("td",{className:"py-4 px-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(H,{className:"w-3 h-3 text-primary"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:s.user_name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.user_email})]})]})}),e.jsx("td",{className:"py-4 px-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[s.nft_image&&e.jsx("img",{src:s.nft_image,alt:s.nft_name,className:"w-6 h-6 rounded object-cover"}),e.jsx("span",{className:"text-sm truncate max-w-32",children:s.nft_name})]})}),e.jsx("td",{className:"py-4 px-2",children:e.jsxs("span",{className:"font-semibold text-emerald-500",children:[s.total_price," ETH"]})}),e.jsx("td",{className:"py-4 px-2 text-sm capitalize",children:s.payment_method}),e.jsx("td",{className:"py-4 px-2",children:e.jsxs("div",{className:"flex flex-col gap-1 text-xs max-w-[150px]",children:[s.sender_address&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-muted-foreground text-[10px] uppercase",children:"From"}),e.jsx("span",{className:"font-mono truncate",title:s.sender_address,children:s.sender_address})]}),s.transaction_id&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-muted-foreground text-[10px] uppercase",children:"Tx ID"}),e.jsx("span",{className:"font-mono truncate",title:s.transaction_id,children:s.transaction_id})]}),!s.sender_address&&!s.transaction_id&&e.jsx("span",{className:"text-muted-foreground italic",children:"No details"})]})}),e.jsx("td",{className:"py-4 px-2",children:e.jsxs(D,{className:`${a.color} flex items-center gap-1 w-fit`,children:[e.jsx(A,{className:"w-3 h-3"}),g]})}),e.jsx("td",{className:"py-4 px-2 text-sm text-muted-foreground",children:s.created_at}),e.jsx("td",{className:"py-4 px-2",children:e.jsxs("div",{className:"relative",children:[e.jsxs(n,{variant:"ghost",size:"sm",className:"gap-1 h-7",onClick:()=>j(x?null:s.id),children:["Change",e.jsx(M,{className:`w-3 h-3 transition-transform ${x?"rotate-180":""}`})]}),x&&e.jsx("div",{className:"absolute right-0 top-full mt-1 bg-background border border-sidebar-border/70 rounded-lg shadow-lg z-10",children:F(s.status).map(p=>e.jsx("button",{onClick:()=>k(s.id,p),className:"block w-full text-left px-3 py-2 text-xs hover:bg-muted capitalize first:rounded-t-lg last:rounded-b-lg whitespace-nowrap",children:p},p))})]})})]},s.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"py-8 text-center text-muted-foreground",children:"No orders found"})})})]})})})]}),e.jsx(E,{links:o.links})]})]})}export{le as default};
