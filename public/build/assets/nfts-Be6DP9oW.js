import{r as o,j as e,H as A,a as y}from"./app-y1ZB5c9x.js";import{C as f,a as v,b as w,c as k,d as E}from"./card-ConpvWXw.js";import{A as P}from"./app-layout-uPNE-LV-.js";import{F as D,g as I,h as $,b as H}from"./index-Gy2IxKx_.js";/* empty css            */import"./button-CX5HfBYh.js";import"./app-shell-BjHxV_At.js";import"./index-BOy9vQFC.js";import"./index-gDNE8eHE.js";import"./createLucideIcon-BeSqJyBR.js";import"./app-logo-Cvmxpj7m.js";import"./index-CqpU3lQc.js";import"./iconBase-CV3Sr50B.js";const B=[{title:"Admin",href:"/admin/dashboard"},{title:"NFTs",href:"/admin/nfts"}];function Y({nfts:h,categories:_}){const[j,c]=o.useState(!1),[l,p]=o.useState(null),[b,m]=o.useState(null),[g,x]=o.useState(!1),[s,d]=o.useState({}),[r,n]=o.useState({name:"",description:"",image:null,price:"",quantity:"1",blockchain:"Ethereum",contract_address:"",token_id:"",status:"active",category_id:""}),q=t=>{const i=t.target.files?.[0];if(i){n({...r,image:i});const a=new FileReader;a.onloadend=()=>{m(a.result)},a.readAsDataURL(i)}},C=t=>{t.preventDefault(),x(!0),d({});const i={};if(r.name.trim()||(i.name="Name is required"),r.description.trim()||(i.description="Description is required"),r.price||(i.price="Price is required"),r.quantity||(i.quantity="Quantity is required"),parseInt(r.quantity)<1&&(i.quantity="Quantity must be at least 1"),r.blockchain||(i.blockchain="Blockchain is required"),r.status||(i.status="Status is required"),!l&&!r.image&&(i.image="Image is required for new NFTs"),Object.keys(i).length>0){d(i),x(!1);return}const a=new FormData;a.append("name",r.name),a.append("description",r.description),r.image&&a.append("image",r.image),a.append("price",r.price),a.append("quantity",r.quantity),a.append("blockchain",r.blockchain),a.append("contract_address",r.contract_address),a.append("token_id",r.token_id),a.append("status",r.status),r.category_id&&a.append("category_id",r.category_id),l?(a.append("_method","PUT"),y.post(`/admin/nfts/${l}`,a,{onSuccess:()=>{c(!1),n({name:"",description:"",image:null,price:"",quantity:"1",blockchain:"Ethereum",contract_address:"",token_id:"",status:"active",category_id:""}),m(null),p(null),d({})},onError:u=>{d(u),console.error("Validation errors:",u)},onFinish:()=>{x(!1)}})):y.post("/admin/nfts",a,{onSuccess:()=>{c(!1),n({name:"",description:"",image:null,price:"",quantity:"1",blockchain:"Ethereum",contract_address:"",token_id:"",status:"active",category_id:""}),m(null),d({})},onError:u=>{d(u),console.error("Validation errors:",u)},onFinish:()=>{x(!1)}})},N=()=>{c(!1),n({name:"",description:"",image:null,price:"",quantity:"1",blockchain:"Ethereum",contract_address:"",token_id:"",status:"active",category_id:""}),m(null),p(null)},F=t=>{n({name:t.name,description:t.description,image:null,price:t.price.toString(),quantity:t.quantity.toString(),blockchain:t.blockchain,contract_address:t.contract_address||"",token_id:t.token_id||"",status:t.status,category_id:t.category_id?t.category_id.toString():""}),t.image_url&&m(t.image_url),p(t.id),c(!0)},T=t=>{confirm("Are you sure you want to delete this NFT?")&&y.delete(`/admin/nfts/${t}`,{onSuccess:()=>{},onError:()=>{alert("Error deleting NFT. Please try again.")}})},S=t=>{switch(t){case"active":return"bg-green-500/10 text-green-500";case"inactive":return"bg-gray-500/10 text-gray-500";case"sold":return"bg-blue-500/10 text-blue-500";default:return"bg-gray-500/10 text-gray-500"}};return e.jsxs(P,{breadcrumbs:B,children:[e.jsx(A,{title:"NFT Management"}),e.jsxs("div",{className:"dash-view",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold tracking-tight",children:"NFT Management"}),e.jsx("p",{className:"mt-2 text-lg text-muted-foreground",children:"Create and manage NFTs in your marketplace"})]}),e.jsxs("button",{onClick:()=>{j?N():(c(!0),p(null))},className:"flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors",children:[e.jsx(D,{className:"w-4 h-4"}),"Add NFT"]})]}),j&&e.jsxs(f,{className:"mb-6",children:[e.jsx(v,{children:e.jsx(w,{children:l?"Edit NFT":"Add New NFT"})}),e.jsx(k,{children:e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"NFT Name"}),e.jsx("input",{type:"text",value:r.name,onChange:t=>n({...r,name:t.target.value}),placeholder:"e.g., Digital Art #1",className:`w-full mt-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary ${s.name?"border-red-500":""}`,required:!0}),s.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:Array.isArray(s.name)?s.name[0]:s.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Price (ETH)"}),e.jsx("input",{type:"number",step:"0.01",value:r.price,onChange:t=>n({...r,price:t.target.value}),placeholder:"0.00",className:`w-full mt-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary ${s.price?"border-red-500":""}`,required:!0}),s.price&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:Array.isArray(s.price)?s.price[0]:s.price})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Quantity"}),e.jsx("input",{type:"number",min:"1",value:r.quantity,onChange:t=>n({...r,quantity:t.target.value}),placeholder:"1",className:`w-full mt-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary ${s.quantity?"border-red-500":""}`,required:!0}),s.quantity&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:Array.isArray(s.quantity)?s.quantity[0]:s.quantity})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Description"}),e.jsx("textarea",{value:r.description,onChange:t=>n({...r,description:t.target.value}),placeholder:"Describe your NFT...",rows:3,className:`w-full mt-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary ${s.description?"border-red-500":""}`,required:!0}),s.description&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:Array.isArray(s.description)?s.description[0]:s.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"NFT Image"}),e.jsxs("div",{className:"mt-1 space-y-4",children:[b&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:b,alt:"Preview",className:"w-full max-h-48 rounded-lg object-cover border border-border"}),e.jsx("p",{className:"mt-2 text-xs text-muted-foreground",children:l&&!r.image?"Current image":"New image preview"})]}),e.jsxs("label",{className:`w-full flex items-center justify-center px-4 py-6 border-2 border-dashed rounded-lg cursor-pointer transition-colors ${s.image?"border-red-500 bg-red-500/5":"border-primary/30 hover:border-primary/50 bg-primary/5"}`,children:[e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"mx-auto h-8 w-8 text-primary",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:e.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20a4 4 0 004 4h24a4 4 0 004-4V20m-8-12l-8 8m0 0l-8-8m8 8v20",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:r.image?r.image.name:"Click to upload image"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"PNG, JPG, GIF, WebP up to 5MB"})]}),e.jsx("input",{type:"file",accept:"image/*",onChange:q,className:"hidden",required:!l})]}),s.image&&e.jsx("p",{className:"text-red-500 text-sm",children:Array.isArray(s.image)?s.image[0]:s.image})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Category"}),e.jsxs("select",{value:r.category_id,onChange:t=>n({...r,category_id:t.target.value}),className:"w-full mt-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"",children:"Select Category"}),_.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Blockchain"}),e.jsxs("select",{value:r.blockchain,onChange:t=>n({...r,blockchain:t.target.value}),className:"w-full mt-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"Ethereum",children:"Ethereum"}),e.jsx("option",{value:"Polygon",children:"Polygon"}),e.jsx("option",{value:"Solana",children:"Solana"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Status"}),e.jsxs("select",{value:r.status,onChange:t=>n({...r,status:t.target.value}),className:"w-full mt-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"sold",children:"Sold"})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",disabled:g,className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Saving...":l?"Update NFT":"Create NFT"}),e.jsx("button",{type:"button",onClick:N,disabled:g,className:"px-4 py-2 bg-muted text-foreground rounded-lg hover:bg-muted/80 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"})]})]})})]}),e.jsxs(f,{children:[e.jsxs(v,{children:[e.jsx(w,{children:"All NFTs"}),e.jsxs(E,{children:["Total of ",h.length," NFTs in your marketplace"]})]}),e.jsx(k,{children:h.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(I,{className:"w-12 h-12 mx-auto text-muted-foreground mb-2"}),e.jsx("p",{className:"text-muted-foreground",children:"No NFTs yet. Create your first NFT!"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"border-b",children:e.jsxs("tr",{className:"text-left text-sm font-medium text-muted-foreground",children:[e.jsx("th",{className:"pb-3 px-2",children:"Name"}),e.jsx("th",{className:"pb-3 px-2",children:"Image"}),e.jsx("th",{className:"pb-3 px-2",children:"Price"}),e.jsx("th",{className:"pb-3 px-2",children:"Qty"}),e.jsx("th",{className:"pb-3 px-2",children:"Creator"}),e.jsx("th",{className:"pb-3 px-2",children:"Status"}),e.jsx("th",{className:"pb-3 px-2",children:"Date"}),e.jsx("th",{className:"pb-3 px-2",children:"Actions"})]})}),e.jsx("tbody",{children:h.map(t=>e.jsxs("tr",{className:"border-b hover:bg-muted/50 transition-colors",children:[e.jsx("td",{className:"py-4 px-2 font-medium",children:t.name}),e.jsx("td",{className:"py-4 px-2",children:e.jsx("img",{src:t.image_url,alt:t.name,className:"w-12 h-12 rounded-lg object-cover"})}),e.jsxs("td",{className:"py-4 px-2 font-semibold text-green-500",children:[t.price," ETH"]}),e.jsx("td",{className:"py-4 px-2",children:t.quantity}),e.jsx("td",{className:"py-4 px-2 text-sm text-muted-foreground",children:t.creator}),e.jsx("td",{className:"py-4 px-2",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${S(t.status)}`,children:t.status})}),e.jsx("td",{className:"py-4 px-2 text-sm text-muted-foreground",children:t.created_at}),e.jsx("td",{className:"py-4 px-2",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>F(t),className:"p-2 text-blue-500 hover:bg-blue-500/10 rounded-lg transition-colors",title:"Edit",children:e.jsx($,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>T(t.id),className:"p-2 text-red-500 hover:bg-red-500/10 rounded-lg transition-colors",title:"Delete",children:e.jsx(H,{className:"w-4 h-4"})})]})})]},t.id))})]})})})]})]})]})}export{Y as default};
