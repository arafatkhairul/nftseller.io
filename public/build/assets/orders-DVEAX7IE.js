import{r as u,j as e,H as w,a as k}from"./app-CXLpGzDo.js";import{C as d,a as r,b as c,c as m,d as F}from"./card-DY_U1rst.js";import{A as S}from"./app-layout-CJEBHMnw.js";import{h as _}from"./index-BqbwQz7T.js";import{F as j,a as f,b as A,c as O}from"./index-iXapJ75Y.js";import{B as z}from"./badge-5wwalGNU.js";import{B as n}from"./button-DOhXL8dT.js";/* empty css            */import"./index-C9jMlh-W.js";import"./index-J2R2g1s-.js";import"./iconBase-DcHc9NSR.js";import"./avatar-TjbSqoCm.js";import"./index-CqpU3lQc.js";import"./app-logo-icon-CZKU06ic.js";import"./index-DVf9dVqk.js";const P=[{title:"Admin",href:"/admin/dashboard"},{title:"Orders",href:"/admin/orders"}],g={pending:{color:"bg-yellow-500/10 text-yellow-700 border-yellow-200",icon:A,label:"Pending"},completed:{color:"bg-green-500/10 text-green-700 border-green-200",icon:j,label:"Completed"},cancelled:{color:"bg-red-500/10 text-red-700 border-red-200",icon:f,label:"Cancelled"},failed:{color:"bg-red-500/10 text-red-700 border-red-200",icon:f,label:"Failed"},sent:{color:"bg-blue-500/10 text-blue-700 border-blue-200",icon:j,label:"Sent (P2P)"}};function K({orders:t}){const[b,h]=u.useState(null),[a,i]=u.useState("all"),p=a==="all"?t:t.filter(s=>s.status===a),N=(s,l)=>{k.patch(`/admin/orders/${s}/status`,{status:l},{onSuccess:()=>{h(null)}})},v=s=>["pending","completed","cancelled","failed","sent"].filter(l=>l!==s),C=t.reduce((s,l)=>s+parseFloat(l.total_price),0);return e.jsxs(S,{breadcrumbs:P,children:[e.jsx(w,{title:"Order Management"}),e.jsxs("div",{className:"dash-view",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold tracking-tight",children:"Order Management"}),e.jsx("p",{className:"mt-2 text-lg text-muted-foreground",children:"Manage and track all orders in the system."})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4 sm:grid-cols-2",children:[e.jsxs(d,{children:[e.jsx(r,{className:"pb-3",children:e.jsx(c,{className:"text-sm font-medium",children:"Total Orders"})}),e.jsxs(m,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All time"})]})]}),e.jsxs(d,{children:[e.jsx(r,{className:"pb-3",children:e.jsx(c,{className:"text-sm font-medium",children:"Pending"})}),e.jsxs(m,{children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-500",children:t.filter(s=>s.status==="pending").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting action"})]})]}),e.jsxs(d,{children:[e.jsx(r,{className:"pb-3",children:e.jsx(c,{className:"text-sm font-medium",children:"Completed"})}),e.jsxs(m,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-500",children:t.filter(s=>s.status==="completed").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Fulfilled"})]})]}),e.jsxs(d,{children:[e.jsx(r,{className:"pb-3",children:e.jsx(c,{className:"text-sm font-medium",children:"Total Revenue"})}),e.jsxs(m,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[C.toFixed(2)," ETH"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All time"})]})]})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs(n,{variant:a==="all"?"default":"outline",onClick:()=>i("all"),size:"sm",children:["All (",t.length,")"]}),e.jsxs(n,{variant:a==="pending"?"default":"outline",onClick:()=>i("pending"),size:"sm",children:["Pending (",t.filter(s=>s.status==="pending").length,")"]}),e.jsxs(n,{variant:a==="completed"?"default":"outline",onClick:()=>i("completed"),size:"sm",children:["Completed (",t.filter(s=>s.status==="completed").length,")"]}),e.jsxs(n,{variant:a==="sent"?"default":"outline",onClick:()=>i("sent"),size:"sm",children:["P2P Sent (",t.filter(s=>s.status==="sent").length,")"]}),e.jsxs(n,{variant:a==="failed"?"default":"outline",onClick:()=>i("failed"),size:"sm",children:["Failed (",t.filter(s=>s.status==="failed").length,")"]})]}),e.jsxs(d,{children:[e.jsxs(r,{children:[e.jsx(c,{children:"All Orders"}),e.jsx(F,{children:"Manage customer orders and payment status"})]}),e.jsx(m,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"border-b",children:e.jsxs("tr",{className:"text-left text-sm font-medium text-muted-foreground",children:[e.jsx("th",{className:"pb-3 px-2",children:"Order ID"}),e.jsx("th",{className:"pb-3 px-2",children:"Customer"}),e.jsx("th",{className:"pb-3 px-2",children:"NFT"}),e.jsx("th",{className:"pb-3 px-2",children:"Amount"}),e.jsx("th",{className:"pb-3 px-2",children:"Payment"}),e.jsx("th",{className:"pb-3 px-2",children:"Status"}),e.jsx("th",{className:"pb-3 px-2",children:"Date"}),e.jsx("th",{className:"pb-3 px-2",children:"Action"})]})}),e.jsx("tbody",{children:p.length>0?p.map(s=>{const l=g[s.status]||g.pending,y=l.icon,o=b===s.id;return e.jsxs("tr",{className:"border-b hover:bg-muted/50 transition-colors",children:[e.jsx("td",{className:"py-4 px-2",children:e.jsx("span",{className:"font-mono text-sm font-medium",children:s.order_number})}),e.jsx("td",{className:"py-4 px-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(_,{className:"w-3 h-3 text-primary"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:s.user_name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.user_email})]})]})}),e.jsx("td",{className:"py-4 px-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[s.nft_image&&e.jsx("img",{src:s.nft_image,alt:s.nft_name,className:"w-6 h-6 rounded object-cover"}),e.jsx("span",{className:"text-sm truncate max-w-32",children:s.nft_name})]})}),e.jsx("td",{className:"py-4 px-2",children:e.jsxs("span",{className:"font-semibold text-emerald-500",children:[s.total_price," ETH"]})}),e.jsx("td",{className:"py-4 px-2 text-sm capitalize",children:s.payment_method}),e.jsx("td",{className:"py-4 px-2",children:e.jsxs(z,{className:`${l.color} border flex items-center gap-1 w-fit`,children:[e.jsx(y,{className:"w-3 h-3"}),l.label]})}),e.jsx("td",{className:"py-4 px-2 text-sm text-muted-foreground",children:s.created_at}),e.jsx("td",{className:"py-4 px-2",children:e.jsxs("div",{className:"relative",children:[e.jsxs(n,{variant:"ghost",size:"sm",className:"gap-1 h-7",onClick:()=>h(o?null:s.id),children:["Change",e.jsx(O,{className:`w-3 h-3 transition-transform ${o?"rotate-180":""}`})]}),o&&e.jsx("div",{className:"absolute right-0 top-full mt-1 bg-background border border-sidebar-border/70 rounded-lg shadow-lg z-10",children:v(s.status).map(x=>e.jsx("button",{onClick:()=>N(s.id,x),className:"block w-full text-left px-3 py-2 text-xs hover:bg-muted capitalize first:rounded-t-lg last:rounded-b-lg whitespace-nowrap",children:x},x))})]})})]},s.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"py-8 text-center text-muted-foreground",children:"No orders found"})})})]})})})]})]})]})}export{K as default};
