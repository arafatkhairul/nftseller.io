import{r as o,j as e,H as S,a as j}from"./app-BTjxeIGd.js";import{C as y,a as v,b as k,c as w,d as A}from"./card-CAh8r9Na.js";import{A as P}from"./app-layout-4Mk0JbEd.js";import{d as D,e as I,f as q,g as $}from"./index-Cqw7YaKb.js";/* empty css            */import"./button-BzB_SweK.js";import"./index-CXBQj5l2.js";import"./index-BmnDqx6J.js";import"./iconBase-Dp0fr3im.js";import"./avatar-gQWB5sZ-.js";import"./index-CqpU3lQc.js";import"./app-logo-icon-DZaQkKN_.js";import"./index-CQ9WoO3F.js";const H=[{title:"Admin",href:"/admin/dashboard"},{title:"NFTs",href:"/admin/nfts"}];function X({nfts:h}){const[b,c]=o.useState(!1),[l,p]=o.useState(null),[N,m]=o.useState(null),[g,x]=o.useState(!1),[a,d]=o.useState({}),[r,n]=o.useState({name:"",description:"",image:null,price:"",blockchain:"Ethereum",contract_address:"",token_id:"",status:"active"}),F=s=>{const i=s.target.files?.[0];if(i){n({...r,image:i});const t=new FileReader;t.onloadend=()=>{m(t.result)},t.readAsDataURL(i)}},C=s=>{s.preventDefault(),x(!0),d({});const i={};if(r.name.trim()||(i.name="Name is required"),r.description.trim()||(i.description="Description is required"),r.price||(i.price="Price is required"),r.blockchain||(i.blockchain="Blockchain is required"),r.status||(i.status="Status is required"),!l&&!r.image&&(i.image="Image is required for new NFTs"),Object.keys(i).length>0){d(i),x(!1);return}const t=new FormData;t.append("name",r.name),t.append("description",r.description),r.image&&t.append("image",r.image),t.append("price",r.price),t.append("blockchain",r.blockchain),t.append("contract_address",r.contract_address),t.append("token_id",r.token_id),t.append("status",r.status),l?(t.append("_method","PUT"),j.post(`/admin/nfts/${l}`,t,{onSuccess:()=>{c(!1),n({name:"",description:"",image:null,price:"",blockchain:"Ethereum",contract_address:"",token_id:"",status:"active"}),m(null),p(null),d({})},onError:u=>{d(u),console.error("Validation errors:",u)},onFinish:()=>{x(!1)}})):j.post("/admin/nfts",t,{onSuccess:()=>{c(!1),n({name:"",description:"",image:null,price:"",blockchain:"Ethereum",contract_address:"",token_id:"",status:"active"}),m(null),d({})},onError:u=>{d(u),console.error("Validation errors:",u)},onFinish:()=>{x(!1)}})},f=()=>{c(!1),n({name:"",description:"",image:null,price:"",blockchain:"Ethereum",contract_address:"",token_id:"",status:"active"}),m(null),p(null)},T=s=>{n({name:s.name,description:s.description,image:null,price:s.price.toString(),blockchain:s.blockchain,contract_address:s.contract_address||"",token_id:s.token_id||"",status:s.status}),s.image_url&&m(s.image_url),p(s.id),c(!0)},_=s=>{confirm("Are you sure you want to delete this NFT?")&&j.delete(`/admin/nfts/${s}`,{onSuccess:()=>{},onError:()=>{alert("Error deleting NFT. Please try again.")}})},E=s=>{switch(s){case"active":return"bg-green-500/10 text-green-500";case"inactive":return"bg-gray-500/10 text-gray-500";case"sold":return"bg-blue-500/10 text-blue-500";default:return"bg-gray-500/10 text-gray-500"}};return e.jsxs(P,{breadcrumbs:H,children:[e.jsx(S,{title:"NFT Management"}),e.jsxs("div",{className:"dash-view",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold tracking-tight",children:"NFT Management"}),e.jsx("p",{className:"mt-2 text-lg text-muted-foreground",children:"Create and manage NFTs in your marketplace"})]}),e.jsxs("button",{onClick:()=>{b?f():(c(!0),p(null))},className:"flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors",children:[e.jsx(D,{className:"w-4 h-4"}),"Add NFT"]})]}),b&&e.jsxs(y,{className:"mb-6",children:[e.jsx(v,{children:e.jsx(k,{children:l?"Edit NFT":"Add New NFT"})}),e.jsx(w,{children:e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"NFT Name"}),e.jsx("input",{type:"text",value:r.name,onChange:s=>n({...r,name:s.target.value}),placeholder:"e.g., Digital Art #1",className:`w-full mt-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary ${a.name?"border-red-500":""}`,required:!0}),a.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:Array.isArray(a.name)?a.name[0]:a.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Price (ETH)"}),e.jsx("input",{type:"number",step:"0.01",value:r.price,onChange:s=>n({...r,price:s.target.value}),placeholder:"0.00",className:`w-full mt-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary ${a.price?"border-red-500":""}`,required:!0}),a.price&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:Array.isArray(a.price)?a.price[0]:a.price})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Description"}),e.jsx("textarea",{value:r.description,onChange:s=>n({...r,description:s.target.value}),placeholder:"Describe your NFT...",rows:3,className:`w-full mt-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary ${a.description?"border-red-500":""}`,required:!0}),a.description&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:Array.isArray(a.description)?a.description[0]:a.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"NFT Image"}),e.jsxs("div",{className:"mt-1 space-y-4",children:[N&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:N,alt:"Preview",className:"w-full max-h-48 rounded-lg object-cover border border-border"}),e.jsx("p",{className:"mt-2 text-xs text-muted-foreground",children:l&&!r.image?"Current image":"New image preview"})]}),e.jsxs("label",{className:`w-full flex items-center justify-center px-4 py-6 border-2 border-dashed rounded-lg cursor-pointer transition-colors ${a.image?"border-red-500 bg-red-500/5":"border-primary/30 hover:border-primary/50 bg-primary/5"}`,children:[e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"mx-auto h-8 w-8 text-primary",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:e.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20a4 4 0 004 4h24a4 4 0 004-4V20m-8-12l-8 8m0 0l-8-8m8 8v20",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:r.image?r.image.name:"Click to upload image"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"PNG, JPG, GIF, WebP up to 5MB"})]}),e.jsx("input",{type:"file",accept:"image/*",onChange:F,className:"hidden",required:!l})]}),a.image&&e.jsx("p",{className:"text-red-500 text-sm",children:Array.isArray(a.image)?a.image[0]:a.image})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Blockchain"}),e.jsxs("select",{value:r.blockchain,onChange:s=>n({...r,blockchain:s.target.value}),className:"w-full mt-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"Ethereum",children:"Ethereum"}),e.jsx("option",{value:"Polygon",children:"Polygon"}),e.jsx("option",{value:"Solana",children:"Solana"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Status"}),e.jsxs("select",{value:r.status,onChange:s=>n({...r,status:s.target.value}),className:"w-full mt-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"sold",children:"Sold"})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",disabled:g,className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Saving...":l?"Update NFT":"Create NFT"}),e.jsx("button",{type:"button",onClick:f,disabled:g,className:"px-4 py-2 bg-muted text-foreground rounded-lg hover:bg-muted/80 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"})]})]})})]}),e.jsxs(y,{children:[e.jsxs(v,{children:[e.jsx(k,{children:"All NFTs"}),e.jsxs(A,{children:["Total of ",h.length," NFTs in your marketplace"]})]}),e.jsx(w,{children:h.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(I,{className:"w-12 h-12 mx-auto text-muted-foreground mb-2"}),e.jsx("p",{className:"text-muted-foreground",children:"No NFTs yet. Create your first NFT!"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"border-b",children:e.jsxs("tr",{className:"text-left text-sm font-medium text-muted-foreground",children:[e.jsx("th",{className:"pb-3 px-2",children:"Name"}),e.jsx("th",{className:"pb-3 px-2",children:"Image"}),e.jsx("th",{className:"pb-3 px-2",children:"Price"}),e.jsx("th",{className:"pb-3 px-2",children:"Creator"}),e.jsx("th",{className:"pb-3 px-2",children:"Status"}),e.jsx("th",{className:"pb-3 px-2",children:"Date"}),e.jsx("th",{className:"pb-3 px-2",children:"Actions"})]})}),e.jsx("tbody",{children:h.map(s=>e.jsxs("tr",{className:"border-b hover:bg-muted/50 transition-colors",children:[e.jsx("td",{className:"py-4 px-2 font-medium",children:s.name}),e.jsx("td",{className:"py-4 px-2",children:e.jsx("img",{src:s.image_url,alt:s.name,className:"w-12 h-12 rounded-lg object-cover"})}),e.jsxs("td",{className:"py-4 px-2 font-semibold text-green-500",children:[s.price," ETH"]}),e.jsx("td",{className:"py-4 px-2 text-sm text-muted-foreground",children:s.creator}),e.jsx("td",{className:"py-4 px-2",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${E(s.status)}`,children:s.status})}),e.jsx("td",{className:"py-4 px-2 text-sm text-muted-foreground",children:s.created_at}),e.jsx("td",{className:"py-4 px-2",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>T(s),className:"p-2 text-blue-500 hover:bg-blue-500/10 rounded-lg transition-colors",title:"Edit",children:e.jsx(q,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>_(s.id),className:"p-2 text-red-500 hover:bg-red-500/10 rounded-lg transition-colors",title:"Delete",children:e.jsx($,{className:"w-4 h-4"})})]})})]},s.id))})]})})})]})]})]})}export{X as default};
