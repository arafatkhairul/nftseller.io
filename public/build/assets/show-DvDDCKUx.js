import{u as f,r as o,j as e,H as h}from"./app-BQ8RvNwM.js";import{B as a}from"./badge-FmMdDyUu.js";import{B as j}from"./button-C8BckL50.js";import{C as d,a as v,c as b}from"./card-D6KUf70Q.js";import{T as g}from"./textarea-BgZ6o7bF.js";import{A as N}from"./app-layout-WRPK3110.js";import{D as y,a as _,E as w}from"./index-o_6rpDzu.js";/* empty css            */import"./app-shell-DHwS8VWN.js";import"./index-B8U4Ab98.js";import"./createLucideIcon-Dtt6dnGg.js";import"./app-logo-CMwlKwqR.js";import"./index-CqpU3lQc.js";import"./iconBase-LFWoVKCq.js";function P({ticket:r,messages:t}){const{data:l,setData:c,post:m,processing:x,reset:p}=f({message:""}),i=o.useRef(null),u=()=>{i.current?.scrollIntoView({behavior:"smooth"})};o.useEffect(()=>{u()},[t]);const n=s=>{s.preventDefault(),m(`/support-tickets/${r.id}/reply`,{onSuccess:()=>p()})};return e.jsxs(N,{breadcrumbs:[{title:"Support Tickets",href:"/support-tickets"},{title:r.ticket_unique_id,href:`/support-tickets/${r.id}`}],children:[e.jsx(h,{title:`Ticket ${r.ticket_unique_id}`}),e.jsxs("div",{className:"p-6 h-[calc(100vh-4rem)] flex flex-col gap-6",children:[e.jsx(d,{className:"flex-shrink-0",children:e.jsx(v,{className:"py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-xl font-bold",children:r.subject}),e.jsx(a,{variant:"outline",children:r.ticket_unique_id})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Created on ",r.created_at]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a,{variant:r.priority==="high"?"destructive":"secondary",children:r.priority}),e.jsx(a,{className:r.status==="open"?"bg-green-500":r.status==="in_progress"?"bg-blue-500":"bg-gray-500",children:r.status.replace("_"," ")})]})]})})}),e.jsxs(d,{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsxs(b,{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[t.map(s=>e.jsxs("div",{className:`flex gap-3 ${s.is_me?"flex-row-reverse":"flex-row"}`,children:[e.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${s.is_admin?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600"}`,children:s.user_avatar?e.jsx("img",{src:s.user_avatar,alt:s.user_name,className:"w-full h-full rounded-full object-cover"}):s.is_admin?e.jsx(y,{}):e.jsx(_,{})}),e.jsxs("div",{className:`flex flex-col max-w-[80%] ${s.is_me?"items-end":"items-start"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-xs font-semibold",children:s.user_name}),e.jsx("span",{className:"text-[10px] text-muted-foreground",children:s.created_at})]}),e.jsx("div",{className:`p-3 rounded-lg text-sm ${s.is_me?"bg-primary text-primary-foreground rounded-tr-none":"bg-muted rounded-tl-none"}`,children:s.message})]})]},s.id)),e.jsx("div",{ref:i})]}),e.jsx("div",{className:"p-4 border-t bg-background",children:e.jsxs("form",{onSubmit:n,className:"flex gap-4",children:[e.jsx(g,{value:l.message,onChange:s=>c("message",s.target.value),placeholder:"Type your reply...",className:"min-h-[60px] resize-none",onKeyDown:s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),n(s))}}),e.jsx(j,{type:"submit",size:"icon",className:"h-[60px] w-[60px]",disabled:x||!l.message.trim(),children:e.jsx(w,{className:"w-5 h-5"})})]})})]})]})]})}export{P as default};
