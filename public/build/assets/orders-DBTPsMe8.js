import{r,j as e,H as R,L as f,a as I,d as D}from"./app-RRZN5hp_.js";import{B as l}from"./button-DUeyFZyG.js";import{B as G}from"./badge-B6SgsnTm.js";import{I as j}from"./input-YDNKAC9k.js";import{L as o}from"./label-BBdyEmbr.js";import{F as L,a as g,b as T,r as U,e as b,s as X,t as q,p as J,u as K}from"./index-D_8wTj0S.js";import{A as Q}from"./app-layout-D5b3eSIr.js";/* empty css            */import"./index-CJ0DFtj-.js";import"./iconBase-ZsGpOiZB.js";import"./index-B9phOuye.js";import"./index-w7pavGSb.js";import"./createLucideIcon-ByOXqmbg.js";import"./index-CJCKAP1n.js";import"./avatar-DE3EFm6l.js";import"./index-CqpU3lQc.js";const V=[{title:"My Portfolio",href:"/orders"}],M={pending:{color:"bg-yellow-500/10 text-yellow-700 border-yellow-200",icon:T,label:"Pending"},completed:{color:"bg-green-500/10 text-green-700 border-green-200",icon:L,label:"Completed"},cancelled:{color:"bg-red-500/10 text-red-700 border-red-200",icon:g,label:"Cancelled"},failed:{color:"bg-red-500/10 text-red-700 border-red-200",icon:g,label:"Failed"},sent:{color:"bg-blue-500/10 text-blue-700 border-blue-200",icon:L,label:"Sent (P2P)"}},W=["TRC20","ERC20","BEP20","Polygon","Solana","Bitcoin"];function pe({orders:n,paymentMethods:E}){const[B,N]=r.useState(!1),[a,v]=r.useState(null),[t,d]=r.useState(1),[i,y]=r.useState(""),[c,w]=r.useState(""),[m,k]=r.useState(""),[x,P]=r.useState(""),[u,S]=r.useState(""),[C,F]=r.useState(""),[z,h]=r.useState(!1),_=s=>{I.patch(`/admin/orders/${s}/status`,{status:"sent"},{onSuccess:()=>{A()}})},Y=s=>{v(s),N(!0),d(1),y(""),w(""),k(s.total_price),P(""),S(""),F(""),h(!1)},A=()=>{N(!1),v(null),d(1)},$=async()=>{if(t===1&&i&&c)d(2);else if(t===2&&m&&x&&u&&a)try{const s=await D.post("/api/p2p-transfer/create",{order_id:a.id,partner_address:i,partner_payment_method_id:c,amount:m,sender_address:x,network:u});s.data.success&&(F(s.data.link),d(3))}catch(s){console.error("Error creating P2P transfer:",s)}},O=()=>{navigator.clipboard.writeText(C),h(!0),setTimeout(()=>h(!1),2e3)};return e.jsxs(Q,{breadcrumbs:V,children:[e.jsx(R,{title:"My Portfolio"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-4",children:[e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"My Portfolio"}),n.length>0&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[n.length," NFT",n.length!==1?"s":""]})]}),e.jsx(f,{href:"/nft-marketplace",children:e.jsx(l,{size:"sm",variant:"outline",children:"Browse NFTs"})})]}),n.length>0?e.jsx("div",{className:"space-y-2",children:n.map(s=>{const p=M[s.status]||M.pending,H=p.icon;return e.jsxs("div",{className:"group border border-border bg-card rounded-xl overflow-hidden hover:shadow-lg hover:border-foreground/20 transition-all duration-200",children:[e.jsx(f,{href:`/orders/${s.id}`,children:e.jsx("div",{className:"cursor-pointer",children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[s.nft_image&&e.jsx("div",{className:"relative flex-shrink-0",children:e.jsx("img",{src:s.nft_image,alt:s.nft_name,className:"w-20 h-20 rounded-lg object-cover border border-border"})}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-base font-semibold text-foreground truncate mb-1",children:s.nft_name}),e.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:s.order_number})]}),e.jsxs(G,{className:`${p.color} flex items-center gap-1.5 whitespace-nowrap`,children:[e.jsx(H,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"text-xs font-medium",children:p.label})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Amount"}),e.jsxs("p",{className:"font-semibold text-foreground",children:[s.total_price," ETH"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Payment"}),e.jsx("p",{className:"font-medium text-foreground capitalize",children:s.payment_method})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(T,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:s.created_at_diff})]})]})]})})})}),s.status==="completed"&&e.jsxs("div",{className:"px-4 pb-4 flex gap-2 justify-end border-t border-border pt-3",children:[e.jsxs(l,{size:"sm",variant:"outline",className:"h-8 text-xs gap-1.5 px-3",onClick:()=>Y(s),children:[e.jsx(U,{className:"w-3 h-3"}),"P2P Sent"]}),e.jsxs(l,{size:"sm",className:"h-8 text-xs gap-1.5 px-3",onClick:()=>_(s.id),children:[e.jsx(b,{className:"w-3 h-3"}),"Sent"]})]})]},s.id)})}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[e.jsx(X,{className:"w-10 h-10 text-muted-foreground mb-3"}),e.jsx("h3",{className:"font-medium text-foreground mb-1",children:"No orders yet"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"Start exploring to buy your first NFT"}),e.jsx(f,{href:"/nft-marketplace",children:e.jsx(l,{size:"sm",children:"Browse NFTs"})})]}),B&&a&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-card border border-border rounded-xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"border-b border-border px-6 py-4 sticky top-0 bg-card z-10",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-foreground",children:"P2P Send NFT"}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Step ",t," of 3"]})]}),e.jsx("button",{onClick:A,className:"text-muted-foreground hover:text-foreground transition-colors",children:e.jsx(g,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsx("div",{className:`h-1 flex-1 rounded-full ${t>=1?"bg-foreground":"bg-muted"}`}),e.jsx("div",{className:`h-1 flex-1 rounded-full ${t>=2?"bg-foreground":"bg-muted"}`}),e.jsx("div",{className:`h-1 flex-1 rounded-full ${t>=3?"bg-foreground":"bg-muted"}`})]})]}),e.jsx("div",{className:"px-6 pt-4",children:e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-accent rounded-lg border border-border",children:[a.nft_image&&e.jsx("img",{src:a.nft_image,alt:a.nft_name,className:"w-14 h-14 rounded-lg object-cover border border-border flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-foreground truncate",children:a.nft_name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[a.total_price," ETH"]})]})]})}),t===1&&e.jsxs("div",{className:"px-6 py-6 space-y-5",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-foreground mb-2",children:"Partner's Payment Details"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Enter your P2P partner's payment information"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"partner-address",className:"text-sm font-medium",children:"Payment Address *"}),e.jsx(j,{id:"partner-address",placeholder:"Enter wallet address",value:i,onChange:s=>y(s.target.value),className:"mt-1.5"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"partner-method",className:"text-sm font-medium",children:"Payment Method *"}),e.jsxs("select",{id:"partner-method",value:c,onChange:s=>w(s.target.value),className:"mt-1.5 w-full h-10 px-3 rounded-md border border-input bg-background text-sm",children:[e.jsx("option",{value:"",children:"Select payment method"}),E.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]})]})]}),t===2&&e.jsxs("div",{className:"px-6 py-6 space-y-5",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-foreground mb-2",children:"Your Payment Details"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Provide your payment information for the transfer"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"your-amount",className:"text-sm font-medium",children:"Amount *"}),e.jsx(j,{id:"your-amount",type:"number",step:"0.01",placeholder:"0.00",value:m,onChange:s=>k(s.target.value),className:"mt-1.5"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"your-address",className:"text-sm font-medium",children:"Your Payment Address *"}),e.jsx(j,{id:"your-address",placeholder:"Enter your wallet address",value:x,onChange:s=>P(s.target.value),className:"mt-1.5"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"your-network",className:"text-sm font-medium",children:"Network *"}),e.jsxs("select",{id:"your-network",value:u,onChange:s=>S(s.target.value),className:"mt-1.5 w-full h-10 px-3 rounded-md border border-input bg-background text-sm",children:[e.jsx("option",{value:"",children:"Select network"}),W.map(s=>e.jsx("option",{value:s,children:s},s))]})]})]})]}),t===3&&e.jsxs("div",{className:"px-6 py-6 space-y-5",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-500/10 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(b,{className:"w-8 h-8 text-green-600"})}),e.jsx("h3",{className:"text-lg font-bold text-foreground mb-2",children:"Link Generated!"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Share this link with your P2P partner"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-4 bg-accent rounded-lg border border-border",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Transfer Link"}),e.jsx("p",{className:"text-xs font-mono text-foreground break-all",children:C})]}),e.jsxs(l,{onClick:O,variant:"outline",className:"w-full gap-2",children:[e.jsx(q,{className:"w-4 h-4"}),z?"Copied!":"Copy Link"]})]}),e.jsx("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-4",children:e.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-400",children:[e.jsx("strong",{children:"Note:"})," Your partner can use this link to complete the P2P transfer. Make sure to verify all details before proceeding."]})})]}),e.jsxs("div",{className:"border-t border-border px-6 py-4 flex gap-3 sticky bottom-0 bg-card",children:[t>1&&t<3&&e.jsxs(l,{variant:"outline",onClick:()=>d(t-1),className:"gap-2",children:[e.jsx(J,{className:"w-4 h-4"}),"Back"]}),t<3?e.jsxs(l,{onClick:$,disabled:t===1&&(!i||!c)||t===2&&(!m||!x||!u),className:"flex-1 gap-2",children:["Next",e.jsx(K,{className:"w-4 h-4"})]}):e.jsxs(l,{onClick:()=>_(a.id),className:"flex-1 gap-2",children:[e.jsx(b,{className:"w-4 h-4"}),"Mark as Sent"]})]})]})})]})]})}export{pe as default};
