import{r as c,j as e,H as L,b as y}from"./app-COTYBvsO.js";import{C as k,a as w,b as C,c as q,d as R}from"./card-qO_fwAeJ.js";import{A as U}from"./app-layout-C9bu3XQ6.js";import{F,d as S,k as V,c as H}from"./Combination-SyY4_UGB.js";/* empty css            */import"./button-Bj-zvocR.js";import"./app-shell-BIyPfTiA.js";import"./index-DmmPnxF8.js";import"./createLucideIcon-nmn7sstZ.js";import"./index-Cvj8y8DH.js";import"./index-CJw6_QVN.js";import"./dropdown-menu-kI874H8q.js";import"./index-lucvfSli.js";import"./iconBase-BlCTSstH.js";const M=[{title:"Admin",href:"/admin/dashboard"},{title:"NFTs",href:"/admin/nfts"}];function ie({nfts:h,categories:A,artists:j=[],blockchains:b=[]}){const[f,m]=c.useState(!1),[o,p]=c.useState(null),[N,u]=c.useState(null),[g,x]=c.useState(!1),[a,d]=c.useState({}),[s,n]=c.useState({name:"",description:"",image:null,price:"",quantity:"1",blockchain:"Ethereum",contract_address:"",token_id:"",status:"active",category_id:"",artist_id:"",blockchain_id:"",rarity:"",views:"0",likes:"0",properties:[]}),T=()=>{n({...s,properties:[...s.properties,{trait_type:"",value:""}]})},P=r=>{const i=[...s.properties];i.splice(r,1),n({...s,properties:i})},v=(r,i,t)=>{const l=[...s.properties];l[r][i]=t,n({...s,properties:l})},E=r=>{const i=r.target.files?.[0];if(i){n({...s,image:i});const t=new FileReader;t.onloadend=()=>{u(t.result)},t.readAsDataURL(i)}},D=r=>{r.preventDefault(),x(!0),d({});const i={};if(s.name.trim()||(i.name="Name is required"),s.description.trim()||(i.description="Description is required"),s.price||(i.price="Price is required"),s.quantity||(i.quantity="Quantity is required"),parseInt(s.quantity)<1&&(i.quantity="Quantity must be at least 1"),s.blockchain||(i.blockchain="Blockchain is required"),s.status||(i.status="Status is required"),!o&&!s.image&&(i.image="Image is required for new NFTs"),Object.keys(i).length>0){d(i),x(!1);return}const t=new FormData;t.append("name",s.name),t.append("description",s.description),s.image&&t.append("image",s.image),t.append("price",s.price),t.append("quantity",s.quantity),t.append("blockchain",s.blockchain),t.append("contract_address",s.contract_address),t.append("token_id",s.token_id),t.append("status",s.status),s.category_id&&t.append("category_id",s.category_id),s.artist_id&&t.append("artist_id",s.artist_id),s.blockchain_id&&t.append("blockchain_id",s.blockchain_id),s.rarity&&t.append("rarity",s.rarity),t.append("views",s.views),t.append("likes",s.likes),t.append("properties",JSON.stringify(s.properties)),o?(t.append("_method","PUT"),y.post(`/admin/nfts/${o}`,t,{onSuccess:()=>{m(!1),n({name:"",description:"",image:null,price:"",quantity:"1",blockchain:"Ethereum",contract_address:"",token_id:"",status:"active",category_id:"",artist_id:"",blockchain_id:"",rarity:"",views:"0",likes:"0",properties:[]}),u(null),p(null),d({})},onError:l=>{d(l),console.error("Validation errors:",l)},onFinish:()=>{x(!1)}})):y.post("/admin/nfts",t,{onSuccess:()=>{m(!1),n({name:"",description:"",image:null,price:"",quantity:"1",blockchain:"Ethereum",contract_address:"",token_id:"",status:"active",category_id:"",artist_id:"",blockchain_id:"",rarity:"",views:"0",likes:"0",properties:[]}),u(null),d({})},onError:l=>{d(l),console.error("Validation errors:",l)},onFinish:()=>{x(!1)}})},_=()=>{m(!1),n({name:"",description:"",image:null,price:"",quantity:"1",blockchain:"Ethereum",contract_address:"",token_id:"",status:"active",category_id:"",artist_id:"",blockchain_id:"",rarity:"",views:"0",likes:"0",properties:[]}),u(null),p(null)},I=r=>{n({name:r.name,description:r.description,image:null,price:r.price.toString(),quantity:r.quantity.toString(),blockchain:r.blockchain,contract_address:r.contract_address||"",token_id:r.token_id||"",status:r.status,category_id:r.category_id?r.category_id.toString():"",artist_id:r.artist_id?r.artist_id.toString():"",blockchain_id:r.blockchain_id?r.blockchain_id.toString():"",rarity:r.rarity||"",views:r.views.toString(),likes:r.likes.toString(),properties:r.properties||[]}),r.image_url&&u(r.image_url),p(r.id),m(!0)},$=r=>{confirm("Are you sure you want to delete this NFT?")&&y.delete(`/admin/nfts/${r}`,{onSuccess:()=>{},onError:()=>{alert("Error deleting NFT. Please try again.")}})},B=r=>{switch(r){case"active":return"bg-green-500/10 text-green-500";case"inactive":return"bg-gray-500/10 text-gray-500";case"sold":return"bg-blue-500/10 text-blue-500";default:return"bg-gray-500/10 text-gray-500"}};return e.jsxs(U,{breadcrumbs:M,children:[e.jsx(L,{title:"NFT Management"}),e.jsxs("div",{className:"dash-view",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold tracking-tight",children:"NFT Management"}),e.jsx("p",{className:"mt-2 text-lg text-muted-foreground",children:"Create and manage NFTs in your marketplace"})]}),e.jsxs("button",{onClick:()=>{f?_():(m(!0),p(null))},className:"flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors",children:[e.jsx(F,{className:"w-4 h-4"}),"Add NFT"]})]}),f&&e.jsxs(k,{className:"mb-6",children:[e.jsx(w,{children:e.jsx(C,{children:o?"Edit NFT":"Add New NFT"})}),e.jsx(q,{children:e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"NFT Name"}),e.jsx("input",{type:"text",value:s.name,onChange:r=>n({...s,name:r.target.value}),placeholder:"e.g., Digital Art #1",className:`w-full mt-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary ${a.name?"border-red-500":""}`,required:!0}),a.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:Array.isArray(a.name)?a.name[0]:a.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Price"}),e.jsx("input",{type:"number",step:"0.01",value:s.price,onChange:r=>n({...s,price:r.target.value}),placeholder:"0.00",className:`w-full mt-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary ${a.price?"border-red-500":""}`,required:!0}),a.price&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:Array.isArray(a.price)?a.price[0]:a.price})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Quantity"}),e.jsx("input",{type:"number",min:"1",value:s.quantity,onChange:r=>n({...s,quantity:r.target.value}),placeholder:"1",className:`w-full mt-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary ${a.quantity?"border-red-500":""}`,required:!0}),a.quantity&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:Array.isArray(a.quantity)?a.quantity[0]:a.quantity})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Description"}),e.jsx("textarea",{value:s.description,onChange:r=>n({...s,description:r.target.value}),placeholder:"Describe your NFT...",rows:3,className:`w-full mt-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary ${a.description?"border-red-500":""}`,required:!0}),a.description&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:Array.isArray(a.description)?a.description[0]:a.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"NFT Image"}),e.jsxs("div",{className:"mt-1 space-y-4",children:[N&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:N,alt:"Preview",className:"w-full max-h-48 rounded-lg object-cover border border-border"}),e.jsx("p",{className:"mt-2 text-xs text-muted-foreground",children:o&&!s.image?"Current image":"New image preview"})]}),e.jsxs("label",{className:`w-full flex items-center justify-center px-4 py-6 border-2 border-dashed rounded-lg cursor-pointer transition-colors ${a.image?"border-red-500 bg-red-500/5":"border-primary/30 hover:border-primary/50 bg-primary/5"}`,children:[e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"mx-auto h-8 w-8 text-primary",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:e.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20a4 4 0 004 4h24a4 4 0 004-4V20m-8-12l-8 8m0 0l-8-8m8 8v20",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:s.image?s.image.name:"Click to upload image"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"PNG, JPG, GIF, WebP up to 5MB"})]}),e.jsx("input",{type:"file",accept:"image/*",onChange:E,className:"hidden",required:!o})]}),a.image&&e.jsx("p",{className:"text-red-500 text-sm",children:Array.isArray(a.image)?a.image[0]:a.image})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Rarity"}),e.jsxs("select",{value:s.rarity,onChange:r=>n({...s,rarity:r.target.value}),className:"w-full mt-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"",children:"None"}),e.jsx("option",{value:"Common",children:"Common"}),e.jsx("option",{value:"Uncommon",children:"Uncommon"}),e.jsx("option",{value:"Rare",children:"Rare"}),e.jsx("option",{value:"Epic",children:"Epic"}),e.jsx("option",{value:"Legendary",children:"Legendary"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Views"}),e.jsx("input",{type:"number",min:"0",value:s.views,onChange:r=>n({...s,views:r.target.value}),placeholder:"0",className:"w-full mt-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Likes"}),e.jsx("input",{type:"number",min:"0",value:s.likes,onChange:r=>n({...s,likes:r.target.value}),placeholder:"0",className:"w-full mt-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Category"}),e.jsxs("select",{value:s.category_id,onChange:r=>n({...s,category_id:r.target.value}),className:"w-full mt-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"",children:"Select Category"}),A.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Artist"}),e.jsxs("select",{value:s.artist_id,onChange:r=>n({...s,artist_id:r.target.value}),className:"w-full mt-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"",children:"Select Artist"}),j.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Blockchain"}),e.jsxs("select",{value:s.blockchain_id,onChange:r=>{const i=r.target.value,t=b.find(l=>l.id.toString()===i);n({...s,blockchain_id:i,blockchain:t?t.name:s.blockchain})},className:"w-full mt-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"",children:"Select Blockchain"}),b.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Status"}),e.jsxs("select",{value:s.status,onChange:r=>n({...s,status:r.target.value}),className:"w-full mt-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"sold",children:"Sold"})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Properties"}),e.jsxs("button",{type:"button",onClick:T,className:"text-sm text-primary hover:underline flex items-center gap-1",children:[e.jsx(F,{className:"w-3 h-3"})," Add Property"]})]}),e.jsxs("div",{className:"space-y-2",children:[s.properties.map((r,i)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"Type (e.g. Color)",value:r.trait_type,onChange:t=>v(i,"trait_type",t.target.value),className:"flex-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),e.jsx("input",{type:"text",placeholder:"Value (e.g. Blue)",value:r.value,onChange:t=>v(i,"value",t.target.value),className:"flex-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),e.jsx("button",{type:"button",onClick:()=>P(i),className:"p-2 text-red-500 hover:bg-red-500/10 rounded-lg transition-colors",children:e.jsx(S,{className:"w-4 h-4"})})]},i)),s.properties.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No properties added yet."})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",disabled:g,className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Saving...":o?"Update NFT":"Create NFT"}),e.jsx("button",{type:"button",onClick:_,disabled:g,className:"px-4 py-2 bg-muted text-foreground rounded-lg hover:bg-muted/80 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"})]})]})})]}),e.jsxs(k,{children:[e.jsxs(w,{children:[e.jsx(C,{children:"All NFTs"}),e.jsxs(R,{children:["Total of ",h.length," NFTs in your marketplace"]})]}),e.jsx(q,{children:h.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(V,{className:"w-12 h-12 mx-auto text-muted-foreground mb-2"}),e.jsx("p",{className:"text-muted-foreground",children:"No NFTs yet. Create your first NFT!"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"border-b",children:e.jsxs("tr",{className:"text-left text-sm font-medium text-muted-foreground",children:[e.jsx("th",{className:"pb-3 px-2",children:"Name"}),e.jsx("th",{className:"pb-3 px-2",children:"Image"}),e.jsx("th",{className:"pb-3 px-2",children:"Price"}),e.jsx("th",{className:"pb-3 px-2",children:"Qty"}),e.jsx("th",{className:"pb-3 px-2",children:"Artist"}),e.jsx("th",{className:"pb-3 px-2",children:"Status"}),e.jsx("th",{className:"pb-3 px-2",children:"Rarity"}),e.jsx("th",{className:"pb-3 px-2",children:"Date"}),e.jsx("th",{className:"pb-3 px-2",children:"Actions"})]})}),e.jsx("tbody",{children:h.map(r=>e.jsxs("tr",{className:"border-b hover:bg-muted/50 transition-colors",children:[e.jsx("td",{className:"py-4 px-2 font-medium",children:r.name}),e.jsx("td",{className:"py-4 px-2",children:e.jsx("img",{src:r.image_url,alt:r.name,className:"w-12 h-12 rounded-lg object-cover"})}),e.jsx("td",{className:"py-4 px-2 font-semibold text-green-500",children:r.price}),e.jsx("td",{className:"py-4 px-2",children:r.quantity}),e.jsx("td",{className:"py-4 px-2 text-sm text-muted-foreground",children:j.find(i=>i.id===r.artist_id)?.name||"Unknown"}),e.jsx("td",{className:"py-4 px-2",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${B(r.status)}`,children:r.status})}),e.jsx("td",{className:"py-4 px-2",children:e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-500/10 text-purple-500",children:r.rarity||"Common"})}),e.jsx("td",{className:"py-4 px-2 text-sm text-muted-foreground",children:r.created_at}),e.jsx("td",{className:"py-4 px-2",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>I(r),className:"p-2 text-blue-500 hover:bg-blue-500/10 rounded-lg transition-colors",title:"Edit",children:e.jsx(H,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>$(r.id),className:"p-2 text-red-500 hover:bg-red-500/10 rounded-lg transition-colors",title:"Delete",children:e.jsx(S,{className:"w-4 h-4"})})]})})]},r.id))})]})})})]})]})]})}export{ie as default};
