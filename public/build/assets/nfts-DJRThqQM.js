import{r as o,j as e,H as P,a as y}from"./app-BQ8RvNwM.js";import{C as v,a as _,b as k,c as w,d as D}from"./card-D6KUf70Q.js";import{A as I}from"./app-layout-WRPK3110.js";import{F as $,j as L,c as R,d as H}from"./index-o_6rpDzu.js";/* empty css            */import"./button-C8BckL50.js";import"./app-shell-DHwS8VWN.js";import"./index-B8U4Ab98.js";import"./createLucideIcon-Dtt6dnGg.js";import"./app-logo-CMwlKwqR.js";import"./index-CqpU3lQc.js";import"./iconBase-LFWoVKCq.js";const U=[{title:"Admin",href:"/admin/dashboard"},{title:"NFTs",href:"/admin/nfts"}];function Z({nfts:h,categories:C,artists:j=[],blockchains:q=[]}){const[b,c]=o.useState(!1),[l,p]=o.useState(null),[N,m]=o.useState(null),[g,x]=o.useState(!1),[i,d]=o.useState({}),[r,t]=o.useState({name:"",description:"",image:null,price:"",quantity:"1",blockchain:"Ethereum",contract_address:"",token_id:"",status:"active",category_id:"",artist_id:"",blockchain_id:"",rarity:"",views:"0",likes:"0"}),F=s=>{const n=s.target.files?.[0];if(n){t({...r,image:n});const a=new FileReader;a.onloadend=()=>{m(a.result)},a.readAsDataURL(n)}},S=s=>{s.preventDefault(),x(!0),d({});const n={};if(r.name.trim()||(n.name="Name is required"),r.description.trim()||(n.description="Description is required"),r.price||(n.price="Price is required"),r.quantity||(n.quantity="Quantity is required"),parseInt(r.quantity)<1&&(n.quantity="Quantity must be at least 1"),r.blockchain||(n.blockchain="Blockchain is required"),r.status||(n.status="Status is required"),!l&&!r.image&&(n.image="Image is required for new NFTs"),Object.keys(n).length>0){d(n),x(!1);return}const a=new FormData;a.append("name",r.name),a.append("description",r.description),r.image&&a.append("image",r.image),a.append("price",r.price),a.append("quantity",r.quantity),a.append("blockchain",r.blockchain),a.append("contract_address",r.contract_address),a.append("token_id",r.token_id),a.append("status",r.status),r.category_id&&a.append("category_id",r.category_id),r.artist_id&&a.append("artist_id",r.artist_id),r.blockchain_id&&a.append("blockchain_id",r.blockchain_id),r.rarity&&a.append("rarity",r.rarity),a.append("views",r.views),a.append("likes",r.likes),l?(a.append("_method","PUT"),y.post(`/admin/nfts/${l}`,a,{onSuccess:()=>{c(!1),t({name:"",description:"",image:null,price:"",quantity:"1",blockchain:"Ethereum",contract_address:"",token_id:"",status:"active",category_id:"",artist_id:"",blockchain_id:"",rarity:"",views:"0",likes:"0"}),m(null),p(null),d({})},onError:u=>{d(u),console.error("Validation errors:",u)},onFinish:()=>{x(!1)}})):y.post("/admin/nfts",a,{onSuccess:()=>{c(!1),t({name:"",description:"",image:null,price:"",quantity:"1",blockchain:"Ethereum",contract_address:"",token_id:"",status:"active",category_id:"",artist_id:"",blockchain_id:"",rarity:"",views:"0",likes:"0"}),m(null),d({})},onError:u=>{d(u),console.error("Validation errors:",u)},onFinish:()=>{x(!1)}})},f=()=>{c(!1),t({name:"",description:"",image:null,price:"",quantity:"1",blockchain:"Ethereum",contract_address:"",token_id:"",status:"active",category_id:"",artist_id:"",blockchain_id:"",rarity:"",views:"0",likes:"0"}),m(null),p(null)},A=s=>{t({name:s.name,description:s.description,image:null,price:s.price.toString(),quantity:s.quantity.toString(),blockchain:s.blockchain,contract_address:s.contract_address||"",token_id:s.token_id||"",status:s.status,category_id:s.category_id?s.category_id.toString():"",artist_id:s.artist_id?s.artist_id.toString():"",blockchain_id:s.blockchain_id?s.blockchain_id.toString():"",rarity:s.rarity||"",views:s.views.toString(),likes:s.likes.toString()}),s.image_url&&m(s.image_url),p(s.id),c(!0)},T=s=>{confirm("Are you sure you want to delete this NFT?")&&y.delete(`/admin/nfts/${s}`,{onSuccess:()=>{},onError:()=>{alert("Error deleting NFT. Please try again.")}})},E=s=>{switch(s){case"active":return"bg-green-500/10 text-green-500";case"inactive":return"bg-gray-500/10 text-gray-500";case"sold":return"bg-blue-500/10 text-blue-500";default:return"bg-gray-500/10 text-gray-500"}};return e.jsxs(I,{breadcrumbs:U,children:[e.jsx(P,{title:"NFT Management"}),e.jsxs("div",{className:"dash-view",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold tracking-tight",children:"NFT Management"}),e.jsx("p",{className:"mt-2 text-lg text-muted-foreground",children:"Create and manage NFTs in your marketplace"})]}),e.jsxs("button",{onClick:()=>{b?f():(c(!0),p(null))},className:"flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors",children:[e.jsx($,{className:"w-4 h-4"}),"Add NFT"]})]}),b&&e.jsxs(v,{className:"mb-6",children:[e.jsx(_,{children:e.jsx(k,{children:l?"Edit NFT":"Add New NFT"})}),e.jsx(w,{children:e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"NFT Name"}),e.jsx("input",{type:"text",value:r.name,onChange:s=>t({...r,name:s.target.value}),placeholder:"e.g., Digital Art #1",className:`w-full mt-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary ${i.name?"border-red-500":""}`,required:!0}),i.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:Array.isArray(i.name)?i.name[0]:i.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Price (ETH)"}),e.jsx("input",{type:"number",step:"0.01",value:r.price,onChange:s=>t({...r,price:s.target.value}),placeholder:"0.00",className:`w-full mt-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary ${i.price?"border-red-500":""}`,required:!0}),i.price&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:Array.isArray(i.price)?i.price[0]:i.price})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Quantity"}),e.jsx("input",{type:"number",min:"1",value:r.quantity,onChange:s=>t({...r,quantity:s.target.value}),placeholder:"1",className:`w-full mt-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary ${i.quantity?"border-red-500":""}`,required:!0}),i.quantity&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:Array.isArray(i.quantity)?i.quantity[0]:i.quantity})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Description"}),e.jsx("textarea",{value:r.description,onChange:s=>t({...r,description:s.target.value}),placeholder:"Describe your NFT...",rows:3,className:`w-full mt-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary ${i.description?"border-red-500":""}`,required:!0}),i.description&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:Array.isArray(i.description)?i.description[0]:i.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"NFT Image"}),e.jsxs("div",{className:"mt-1 space-y-4",children:[N&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:N,alt:"Preview",className:"w-full max-h-48 rounded-lg object-cover border border-border"}),e.jsx("p",{className:"mt-2 text-xs text-muted-foreground",children:l&&!r.image?"Current image":"New image preview"})]}),e.jsxs("label",{className:`w-full flex items-center justify-center px-4 py-6 border-2 border-dashed rounded-lg cursor-pointer transition-colors ${i.image?"border-red-500 bg-red-500/5":"border-primary/30 hover:border-primary/50 bg-primary/5"}`,children:[e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"mx-auto h-8 w-8 text-primary",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:e.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20a4 4 0 004 4h24a4 4 0 004-4V20m-8-12l-8 8m0 0l-8-8m8 8v20",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:r.image?r.image.name:"Click to upload image"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"PNG, JPG, GIF, WebP up to 5MB"})]}),e.jsx("input",{type:"file",accept:"image/*",onChange:F,className:"hidden",required:!l})]}),i.image&&e.jsx("p",{className:"text-red-500 text-sm",children:Array.isArray(i.image)?i.image[0]:i.image})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Rarity"}),e.jsxs("select",{value:r.rarity,onChange:s=>t({...r,rarity:s.target.value}),className:"w-full mt-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"",children:"None"}),e.jsx("option",{value:"Common",children:"Common"}),e.jsx("option",{value:"Uncommon",children:"Uncommon"}),e.jsx("option",{value:"Rare",children:"Rare"}),e.jsx("option",{value:"Epic",children:"Epic"}),e.jsx("option",{value:"Legendary",children:"Legendary"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Views"}),e.jsx("input",{type:"number",min:"0",value:r.views,onChange:s=>t({...r,views:s.target.value}),placeholder:"0",className:"w-full mt-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Likes"}),e.jsx("input",{type:"number",min:"0",value:r.likes,onChange:s=>t({...r,likes:s.target.value}),placeholder:"0",className:"w-full mt-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Category"}),e.jsxs("select",{value:r.category_id,onChange:s=>t({...r,category_id:s.target.value}),className:"w-full mt-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"",children:"Select Category"}),C.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Artist"}),e.jsxs("select",{value:r.artist_id,onChange:s=>t({...r,artist_id:s.target.value}),className:"w-full mt-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"",children:"Select Artist"}),j.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Blockchain"}),e.jsxs("select",{value:r.blockchain_id,onChange:s=>t({...r,blockchain_id:s.target.value}),className:"w-full mt-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"",children:"Select Blockchain"}),q.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Status"}),e.jsxs("select",{value:r.status,onChange:s=>t({...r,status:s.target.value}),className:"w-full mt-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"sold",children:"Sold"})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",disabled:g,className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Saving...":l?"Update NFT":"Create NFT"}),e.jsx("button",{type:"button",onClick:f,disabled:g,className:"px-4 py-2 bg-muted text-foreground rounded-lg hover:bg-muted/80 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"})]})]})})]}),e.jsxs(v,{children:[e.jsxs(_,{children:[e.jsx(k,{children:"All NFTs"}),e.jsxs(D,{children:["Total of ",h.length," NFTs in your marketplace"]})]}),e.jsx(w,{children:h.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(L,{className:"w-12 h-12 mx-auto text-muted-foreground mb-2"}),e.jsx("p",{className:"text-muted-foreground",children:"No NFTs yet. Create your first NFT!"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"border-b",children:e.jsxs("tr",{className:"text-left text-sm font-medium text-muted-foreground",children:[e.jsx("th",{className:"pb-3 px-2",children:"Name"}),e.jsx("th",{className:"pb-3 px-2",children:"Image"}),e.jsx("th",{className:"pb-3 px-2",children:"Price"}),e.jsx("th",{className:"pb-3 px-2",children:"Qty"}),e.jsx("th",{className:"pb-3 px-2",children:"Artist"}),e.jsx("th",{className:"pb-3 px-2",children:"Status"}),e.jsx("th",{className:"pb-3 px-2",children:"Rarity"}),e.jsx("th",{className:"pb-3 px-2",children:"Date"}),e.jsx("th",{className:"pb-3 px-2",children:"Actions"})]})}),e.jsx("tbody",{children:h.map(s=>e.jsxs("tr",{className:"border-b hover:bg-muted/50 transition-colors",children:[e.jsx("td",{className:"py-4 px-2 font-medium",children:s.name}),e.jsx("td",{className:"py-4 px-2",children:e.jsx("img",{src:s.image_url,alt:s.name,className:"w-12 h-12 rounded-lg object-cover"})}),e.jsxs("td",{className:"py-4 px-2 font-semibold text-green-500",children:[s.price," ETH"]}),e.jsx("td",{className:"py-4 px-2",children:s.quantity}),e.jsx("td",{className:"py-4 px-2 text-sm text-muted-foreground",children:j.find(n=>n.id===s.artist_id)?.name||"Unknown"}),e.jsx("td",{className:"py-4 px-2",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${E(s.status)}`,children:s.status})}),e.jsx("td",{className:"py-4 px-2",children:e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-500/10 text-purple-500",children:s.rarity||"Common"})}),e.jsx("td",{className:"py-4 px-2 text-sm text-muted-foreground",children:s.created_at}),e.jsx("td",{className:"py-4 px-2",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>A(s),className:"p-2 text-blue-500 hover:bg-blue-500/10 rounded-lg transition-colors",title:"Edit",children:e.jsx(R,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>T(s.id),className:"p-2 text-red-500 hover:bg-red-500/10 rounded-lg transition-colors",title:"Delete",children:e.jsx(H,{className:"w-4 h-4"})})]})})]},s.id))})]})})})]})]})]})}export{Z as default};
