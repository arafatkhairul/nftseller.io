import{r as u,j as e,H as w,a as F}from"./app-BQ8RvNwM.js";import{C as n,a as d,b as i,c as r,d as k}from"./card-D6KUf70Q.js";import{A as _}from"./app-layout-WRPK3110.js";import{a as A}from"./index-o_6rpDzu.js";import{F as j,a as f,b as O,c as S}from"./index-BYMVUYZf.js";import{B as z}from"./badge-FmMdDyUu.js";import{B as c}from"./button-C8BckL50.js";/* empty css            */import"./app-shell-DHwS8VWN.js";import"./index-B8U4Ab98.js";import"./createLucideIcon-Dtt6dnGg.js";import"./app-logo-CMwlKwqR.js";import"./index-CqpU3lQc.js";import"./iconBase-LFWoVKCq.js";const E=[{title:"Admin",href:"/admin/dashboard"},{title:"Orders",href:"/admin/orders"}],g={pending:{color:"bg-yellow-500/10 text-yellow-700 border-yellow-200",icon:O,label:"Pending"},completed:{color:"bg-green-500/10 text-green-700 border-green-200",icon:j,label:"Completed"},cancelled:{color:"bg-red-500/10 text-red-700 border-red-200",icon:f,label:"Cancelled"},failed:{color:"bg-red-500/10 text-red-700 border-red-200",icon:f,label:"Failed"},sent:{color:"bg-blue-500/10 text-blue-700 border-blue-200",icon:j,label:"Sent (P2P)"}};function J({orders:t}){const[b,h]=u.useState(null),[a,m]=u.useState("all"),p=a==="all"?t:t.filter(s=>s.status===a),N=(s,l)=>{F.patch(`/admin/orders/${s}/status`,{status:l},{onSuccess:()=>{h(null)}})},v=s=>["pending","completed","cancelled","failed"].filter(l=>l!==s),C=t.reduce((s,l)=>s+parseFloat(l.total_price),0);return e.jsxs(_,{breadcrumbs:E,children:[e.jsx(w,{title:"Order Management"}),e.jsxs("div",{className:"dash-view",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold tracking-tight",children:"Order Management"}),e.jsx("p",{className:"mt-2 text-lg text-muted-foreground",children:"Manage and track all orders in the system."})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4 sm:grid-cols-2",children:[e.jsxs(n,{children:[e.jsx(d,{className:"pb-3",children:e.jsx(i,{className:"text-sm font-medium",children:"Total Orders"})}),e.jsxs(r,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All time"})]})]}),e.jsxs(n,{children:[e.jsx(d,{className:"pb-3",children:e.jsx(i,{className:"text-sm font-medium",children:"Pending"})}),e.jsxs(r,{children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-500",children:t.filter(s=>s.status==="pending").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting action"})]})]}),e.jsxs(n,{children:[e.jsx(d,{className:"pb-3",children:e.jsx(i,{className:"text-sm font-medium",children:"Completed"})}),e.jsxs(r,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-500",children:t.filter(s=>s.status==="completed").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Fulfilled"})]})]}),e.jsxs(n,{children:[e.jsx(d,{className:"pb-3",children:e.jsx(i,{className:"text-sm font-medium",children:"Total Revenue"})}),e.jsxs(r,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[C.toFixed(2)," ETH"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All time"})]})]})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs(c,{variant:a==="all"?"default":"outline",onClick:()=>m("all"),size:"sm",children:["All (",t.length,")"]}),e.jsxs(c,{variant:a==="pending"?"default":"outline",onClick:()=>m("pending"),size:"sm",children:["Pending (",t.filter(s=>s.status==="pending").length,")"]}),e.jsxs(c,{variant:a==="completed"?"default":"outline",onClick:()=>m("completed"),size:"sm",children:["Completed (",t.filter(s=>s.status==="completed").length,")"]}),e.jsxs(c,{variant:a==="failed"?"default":"outline",onClick:()=>m("failed"),size:"sm",children:["Failed (",t.filter(s=>s.status==="failed").length,")"]})]}),e.jsxs(n,{children:[e.jsxs(d,{children:[e.jsx(i,{children:"All Orders"}),e.jsx(k,{children:"Manage customer orders and payment status"})]}),e.jsx(r,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"border-b",children:e.jsxs("tr",{className:"text-left text-sm font-medium text-muted-foreground",children:[e.jsx("th",{className:"pb-3 px-2",children:"Order ID"}),e.jsx("th",{className:"pb-3 px-2",children:"Customer"}),e.jsx("th",{className:"pb-3 px-2",children:"NFT"}),e.jsx("th",{className:"pb-3 px-2",children:"Amount"}),e.jsx("th",{className:"pb-3 px-2",children:"Payment"}),e.jsx("th",{className:"pb-3 px-2",children:"Status"}),e.jsx("th",{className:"pb-3 px-2",children:"Date"}),e.jsx("th",{className:"pb-3 px-2",children:"Action"})]})}),e.jsx("tbody",{children:p.length>0?p.map(s=>{const l=g[s.status]||g.pending,y=l.icon,x=b===s.id;return e.jsxs("tr",{className:"border-b hover:bg-muted/50 transition-colors",children:[e.jsx("td",{className:"py-4 px-2",children:e.jsx("span",{className:"font-mono text-sm font-medium",children:s.order_number})}),e.jsx("td",{className:"py-4 px-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(A,{className:"w-3 h-3 text-primary"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:s.user_name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.user_email})]})]})}),e.jsx("td",{className:"py-4 px-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[s.nft_image&&e.jsx("img",{src:s.nft_image,alt:s.nft_name,className:"w-6 h-6 rounded object-cover"}),e.jsx("span",{className:"text-sm truncate max-w-32",children:s.nft_name})]})}),e.jsx("td",{className:"py-4 px-2",children:e.jsxs("span",{className:"font-semibold text-emerald-500",children:[s.total_price," ETH"]})}),e.jsx("td",{className:"py-4 px-2 text-sm capitalize",children:s.payment_method}),e.jsx("td",{className:"py-4 px-2",children:e.jsxs(z,{className:`${l.color} flex items-center gap-1 w-fit`,children:[e.jsx(y,{className:"w-3 h-3"}),l.label]})}),e.jsx("td",{className:"py-4 px-2 text-sm text-muted-foreground",children:s.created_at}),e.jsx("td",{className:"py-4 px-2",children:e.jsxs("div",{className:"relative",children:[e.jsxs(c,{variant:"ghost",size:"sm",className:"gap-1 h-7",onClick:()=>h(x?null:s.id),children:["Change",e.jsx(S,{className:`w-3 h-3 transition-transform ${x?"rotate-180":""}`})]}),x&&e.jsx("div",{className:"absolute right-0 top-full mt-1 bg-background border border-sidebar-border/70 rounded-lg shadow-lg z-10",children:v(s.status).map(o=>e.jsx("button",{onClick:()=>N(s.id,o),className:"block w-full text-left px-3 py-2 text-xs hover:bg-muted capitalize first:rounded-t-lg last:rounded-b-lg whitespace-nowrap",children:o},o))})]})})]},s.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"py-8 text-center text-muted-foreground",children:"No orders found"})})})]})})})]})]})]})}export{J as default};
