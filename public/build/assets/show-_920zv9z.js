import{u as j,r as o,j as e,H as v,a as b}from"./app-y1ZB5c9x.js";import{B as d}from"./badge-YGhNNr7I.js";import{B as g}from"./button-CX5HfBYh.js";import{C as c,a as N,c as y}from"./card-ConpvWXw.js";import{S as _,a as w,b as S,c as C,d as a}from"./select-BmTTWNvy.js";import{T as $}from"./textarea-BkWIGvV7.js";import{A as T}from"./app-layout-uPNE-LV-.js";import{x as B,i as E,y as A}from"./index-Gy2IxKx_.js";/* empty css            */import"./index-gDNE8eHE.js";import"./index-BOy9vQFC.js";import"./app-logo-Cvmxpj7m.js";import"./index-CzQvPaTj.js";import"./app-shell-BjHxV_At.js";import"./createLucideIcon-BeSqJyBR.js";import"./check-DirCP8PN.js";import"./index-CqpU3lQc.js";import"./iconBase-CV3Sr50B.js";function W({ticket:r,messages:t}){const{data:l,setData:m,post:x,processing:p,reset:u}=j({message:""}),i=o.useRef(null),h=()=>{i.current?.scrollIntoView({behavior:"smooth"})};o.useEffect(()=>{h()},[t]);const n=s=>{s.preventDefault(),x(`/admin/support-tickets/${r.id}/reply`,{onSuccess:()=>u()})},f=s=>{b.patch(`/admin/support-tickets/${r.id}/status`,{status:s},{preserveScroll:!0})};return e.jsxs(T,{breadcrumbs:[{title:"Admin",href:"/admin/dashboard"},{title:"Support Tickets",href:"/admin/support-tickets"},{title:r.ticket_unique_id,href:`/admin/support-tickets/${r.id}`}],children:[e.jsx(v,{title:`Ticket ${r.ticket_unique_id}`}),e.jsxs("div",{className:"p-6 h-[calc(100vh-4rem)] flex flex-col gap-6",children:[e.jsx(c,{className:"flex-shrink-0",children:e.jsx(N,{className:"py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-xl font-bold",children:r.subject}),e.jsx(d,{variant:"outline",children:r.ticket_unique_id})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Opened by ",r.user_name," on ",r.created_at]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(_,{value:r.status,onValueChange:f,children:[e.jsx(w,{className:"w-[140px]",children:e.jsx(S,{})}),e.jsxs(C,{children:[e.jsx(a,{value:"open",children:"Open"}),e.jsx(a,{value:"in_progress",children:"In Progress"}),e.jsx(a,{value:"closed",children:"Closed"})]})]}),e.jsx(d,{variant:r.priority==="high"?"destructive":"secondary",children:r.priority})]})]})})}),e.jsxs(c,{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsxs(y,{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[t.map(s=>e.jsxs("div",{className:`flex gap-3 ${s.is_me?"flex-row-reverse":"flex-row"}`,children:[e.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${s.is_admin?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600"}`,children:s.user_avatar?e.jsx("img",{src:s.user_avatar,alt:s.user_name,className:"w-full h-full rounded-full object-cover"}):s.is_admin?e.jsx(B,{}):e.jsx(E,{})}),e.jsxs("div",{className:`flex flex-col max-w-[80%] ${s.is_me?"items-end":"items-start"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-xs font-semibold",children:s.user_name}),e.jsx("span",{className:"text-[10px] text-muted-foreground",children:s.created_at})]}),e.jsx("div",{className:`p-3 rounded-lg text-sm ${s.is_me?"bg-primary text-primary-foreground rounded-tr-none":"bg-muted rounded-tl-none"}`,children:s.message})]})]},s.id)),e.jsx("div",{ref:i})]}),e.jsx("div",{className:"p-4 border-t bg-background",children:e.jsxs("form",{onSubmit:n,className:"flex gap-4",children:[e.jsx($,{value:l.message,onChange:s=>m("message",s.target.value),placeholder:"Type your reply...",className:"min-h-[60px] resize-none",onKeyDown:s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),n(s))}}),e.jsx(g,{type:"submit",size:"icon",className:"h-[60px] w-[60px]",disabled:p||!l.message.trim(),children:e.jsx(A,{className:"w-5 h-5"})})]})})]})]})]})}export{W as default};
